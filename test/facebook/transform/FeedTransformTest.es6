import {Environment} from '../../env/testEnv.es6';
import {FeedTransform} from '../../../src/facebook/transform/FeedTransform.es6';
import {ScrapeTestAid} from '../../env/facebook/transform/ScrapeTestAid.es6';

let aid = null;
let chai = require('chai');
let env = new Environment();
let htmlparser = require('htmlparser2');
let subject = null;

chai.should();

describe('FeedTransform tests', function() {

    beforeEach(() => {
        subject = new FeedTransform(false);
    });

    describe('#Parse', function() {

    	beforeEach(() => {
    		aid = new ScrapeTestAid(subject, 'transform', 'm-top-of-feed');
    	});

    	it('should correctly parse a page of posts, and pocket full of rye...', (done) => {
    		let html = '<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head></head><body class="b c d e" tabindex="0"><div class="f"><div id="viewport"><div id="objects_container"><div class="bf bg e" id="root" role="main"><div class="e ct cu"><div class="cv cw"><div><div class="cx cy cz da"><table class="l" role="presentation"><tbody><tr><td class="u m"><div class="db"><img class="img" height="16" role="presentation" src="https://static.xx.fbcdn.net/rsrc.php/v3/yn/r/v6Zr6ccVVb5.png" width="16"/></div></td><td class="u r dc"><a class="dd" href="/a/notifications.php?redir=%2Fgroups%2F1172970366061944%3Fmulti_permalinks%3D1650423724983270&amp;seennotification=1479090848688224&amp;gfid=AQANjUrsZ92FLmXs&amp;refid=8"><div><span class="blueName">BJ Godfrey</span>posted in <span class="blueName">Perth Alcohol Economy (using alcohol as currency to trade)</span>on Sunday: &quot;Is there an Aircon person who can come and get my...&quot;. <span class="ck fcg"><abbr class="de">5 hours ago</abbr></span></div></a></td></tr></tbody></table></div><div class="cx cy cz da"><table class="l" role="presentation"><tbody><tr><td class="u m"><div class="db"><img class="img" height="16" role="presentation" src="https://static.xx.fbcdn.net/rsrc.php/v3/yn/r/v6Zr6ccVVb5.png" width="16"/></div></td><td class="u r dc"><a class="dd" href="/a/notifications.php?redir=%2Fgroups%2F1667167856835981%3Fview%3Dpermalink%26id%3D1880323848853713%26comment_id%3D1880400518846046%231880400518846046&amp;seennotification=1479112549350418&amp;gfid=AQAz6EK1clq3QsLr&amp;refid=8"><div><span class="blueName">Jason Modrijan</span>, <span class="blueName">Adam Mark Bonser</span>and 6 others also commented on a post in <span class="blueName">Perth Beer Economy.</span>. <span class="ck fcg"><abbr class="de">Yesterday at 7:37pm</abbr></span></div></a></td></tr></tbody></table></div><a class="df" href="/a/notifications.php?seennotification=1477376185574037%2C1479090848688224%2C1479112549350418&amp;gfid=AQD2iYI6h3s3G2ph&amp;refid=8">Clear Notifications</a></div></div></div><div id="m_newsfeed_stream"><div class="dg"/><div id="m-top-of-feed"/><div class="dh di dj"><div class="cv cw dk" id="u_0_1" role="article"><div><h3 class="dl dm"><strong><a href="/Genesis67?fref=nf&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919&amp;__tn__=C">Brett Martin</a></strong>commented on this.</h3></div><div class="cv cw dk" id="u_0_2" role="article"><div><h3 class="dl dm"><strong><a href="/robyn.martin.79274?fref=nf&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919&amp;__tn__=C">Robyn Ma</a></strong>shared <a href="/jackandjillmarket/?refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919&amp;__tn__=C">The Jack &amp; Jill Market</a>\'s <a href="/jackandjillmarket/photos/gm.1275081175890039/1323179581047399/?type=3&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919&amp;__tn__=C">photo</a>.</h3><div class="dn do"><div class="cv cw dk dp" id="u_0_b" role="article"><div><h3 class="dl dq"><span><strong><a href="/jackandjillmarket/?refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919&amp;__tn__=C">The Jack &amp; Jill Market</a></strong><span class="fcg">&gt; </span>‎<strong><a href="/events/1242668499131307?refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919&amp;__tn__=C">The Jack &amp; Jill Market - Paisley</a></strong></span></h3><div class="dr" style=""><span><p>Oh so true <span class="_4ay8 _3kkw"></span></p></span></div><div class="dn do"><div class="ds dt"><a class="du dv dw" href="/jackandjillmarket/photos/gm.1275081175890039/1323179581047399/?type=3&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919&amp;__tn__=E"><img alt="Image may contain: text and one or more people" class="img" height="200" src="https://scontent.fper1-1.fna.fbcdn.net/v/t1.0-0/cp0/e15/q65/p403x403/15027649_1323179581047399_1418558040906944590_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=6a5270c9a3e23221bb1c2baa7c82971f&amp;oe=58CD1AEC" width="200"/></a></div></div></div></div></div></div><div class="dx"><div class="ck fcg"><abbr>32 mins</abbr><span aria-hidden="true">· </span><span class="dy"><span><span class="ck">Friends</span></span></span></div><div class="ck fcg"><span class="ck fcg"><a aria-label="3 reactions, including Haha" class="dz ea" href="/story.php?story_fbid=10157679363915375&amp;id=884260374&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919"><span class="eb"><img class="img" height="13" src="https://static.xx.fbcdn.net/rsrc.php/v3/yQ/r/rHxxBj7dV50.png" width="13"/></span>3</a><span aria-hidden="true">· </span><a href="/a/like.php?ul&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=10157679363915375&amp;av=100009834785112&amp;gfid=AQCBrBju1BHW31OB&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919">Like</a><span aria-hidden="true">· </span><a href="/reactions/picker/?ft_id=10157679363915375&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;tab=h_nor&amp;av=100009834785112&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919&amp;refid=8">React</a></span><span aria-hidden="true">· </span><a class="ea" href="/story.php?story_fbid=10157679363915375&amp;id=884260374&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919">1 Comment</a><span aria-hidden="true">· </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009834785112&amp;sid=1323179581047399&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919">Share</a><span aria-hidden="true">· </span><a href="/story.php?story_fbid=10157679363915375&amp;id=884260374&amp;bacr=1479168053%3A1479168053%3A1%3A-8133789268229775919%3A1479167757%3A6352978418298650730&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919#footer_action_list">Full Story</a><span aria-hidden="true">· </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQwNDU3M7c0NjO2NDQ1Njetc80rCS5JLCktdi5KTSzJzM8LLskvqqyrs7AwMTIzMDY3qaszqAMA%22%2C%22story_permalink_token%22%3A%22S%3A_I884260374%3A10157679363915375%22%7D&amp;redirect_uri=%2Fstories.php%3Ftab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-8133789268229775919">More</a></div></div></div></div><div class="cv cw dk" id="u_0_3" role="article"><div><div><h3 class="dl dq"><span><strong><a href="/IFeakingLoveScience/?refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-938205180417529560&amp;__tn__=C">I fucking love science</a></strong></span></h3></div><div class="dr" style=""><span><p>It\'s clearly artificial.</p></span></div><div class="dn do"><a class="ec dt" href="http://lm.facebook.com/l.php?u=http%3A%2F%2Fwww.iflscience.com%2Fspace%2Fmysterious-metal-object-crash-lands-at-a-jade-mine-in-myanmar%2F&amp;h=eAQHAXJs2&amp;enc=AZOs56qvHoGPrj71W9Wr_qr3YJSqkmRgEy5phvMNXm3gs3cUNygpZZKxJyOldK4tnNnrwNC-oxjuhuuNymL7f6uq7BN4gVcHeqDDVYSiliJDpVdTRm_qbZLh9778djuXh0FkmM1O-AuQWKJAfVvdFecV&amp;s=1" id="u_0_4" target="_blank"><div class="ed ee ef"><table class="l bt" role="presentation"><tbody><tr><td class="m eg"><img class="img" height="112" role="presentation" src="https://external.fper1-1.fna.fbcdn.net/safe_image.php?d=AQAIyk_jfnbPIzhO&amp;w=224&amp;h=224&amp;url=fbstaging%3A%2F%2Fgraph.facebook.com%2Fstaging_resources%2FMDExNTQyOTUyNTI1NzI1NzUzOjMyOTMwNTM0MQ%3D%3D&amp;cfs=1&amp;jq=75&amp;ext=jpg" width="112"/></td><td class="r"><h3 class="eh dq ei">Mysterious Metal Object Crash Lands At A Jade Mine In Myanmar</h3><div class="ej ek">iflscience.com<div class="ej"/></div></td></tr></tbody></table></div></a></div></div><div class="dx"><div class="ck fcg"><abbr>2 hrs</abbr><span aria-hidden="true">· </span><span class="dy"><span><span class="ck">Custom</span></span></span></div><div class="ck fcg"><span class="ck fcg"><a aria-label="1 reaction, including Like, Wow and Haha" class="dz ea" href="/story.php?story_fbid=1542953782392294&amp;id=367116489976035&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-938205180417529560"><span class="eb"><img class="img" height="13" src="https://static.xx.fbcdn.net/rsrc.php/v3/yb/r/9ivHMFTOv59.png" width="13"/><img class="img" height="13" src="https://static.xx.fbcdn.net/rsrc.php/v3/yx/r/e4wmXN_peFk.png" width="13"/><img class="img" height="13" src="https://static.xx.fbcdn.net/rsrc.php/v3/yQ/r/rHxxBj7dV50.png" width="13"/></span>3,724</a><span aria-hidden="true">· </span><a href="/a/like.php?ul&amp;aftercursorr=1479168053%3A1479168053%3A1%3A-8133789268229775919%3A1479167757%3A6352978418298650730&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=1542953782392294&amp;av=100009834785112&amp;gfid=AQBJ_ToT0xfO2L6e&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-938205180417529560">Like</a><span aria-hidden="true">· </span><a href="/reactions/picker/?ft_id=1542953782392294&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;aftercursor=MTQ3OTE2ODA1MzoxNDc5MTY4MDUzOjE6LTgxMzM3ODkyNjgyMjk3NzU5MTk6MTQ3OTE2Nzc1Nzo2MzUyOTc4NDE4Mjk4NjUwNzMw&amp;tab=h_nor&amp;av=100009834785112&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-938205180417529560&amp;refid=8">React</a></span><span aria-hidden="true">· </span><a class="ea" href="/story.php?story_fbid=1542953782392294&amp;id=367116489976035&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-938205180417529560">534 Comments</a><span aria-hidden="true">· </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009834785112&amp;sid=1542953782392294&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-938205180417529560">Share</a><span aria-hidden="true">· </span><a href="/story.php?story_fbid=1542953782392294&amp;id=367116489976035&amp;bacr=1479168053%3A1479168053%3A1%3A-8133789268229775919%3A1479167757%3A6352978418298650730&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-938205180417529560#footer_action_list">Full Story</a><span aria-hidden="true">· </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQ1MbI0NTa3MDK2NDKyNKlzzSsJzkgsSnUuSk0syczPCy7JL6qsqzM2Mzc0NDOxsLQ0NzMwNq3LiM_LL6ozqAMA%22%2C%22story_permalink_token%22%3A%22S%3A_I367116489976035%3A1542953782392294%22%7D&amp;redirect_uri=%2Fstories.php%3Faftercursorr%3D1479168053%253A1479168053%253A1%253A-8133789268229775919%253A1479167757%253A6352978418298650730%26tab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-938205180417529560">More</a></div></div></div><div class="cv cw dk" id="u_0_5" role="article"><div><div><h3 class="dl dm"><strong><a href="/bryan.martin.58958?fref=nf&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371&amp;__tn__=C">Bryan Martin</a></strong>added <a href="/story.php?story_fbid=10154190424062569&amp;id=704252568&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371&amp;__tn__=C">19 new photos</a>.</h3></div><div class="dr" style=""><span><p>Thank you to Quairading Rotary for a great night, the exchange students all gave a brief review of them selves.</p></span></div><div class="dn do"><div class="el dt" style="width:205px; height:205px;"><a class="em en" href="/photo.php?fbid=10154190421102569&amp;id=704252568&amp;set=pcb.10154190424062569&amp;source=48&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371" style="top:0px; left:0px; width: 102px; height: 102px;"><img alt="Image may contain: 1 person" class="eo img" height="102" src="https://scontent.fper1-1.fna.fbcdn.net/v/t1.0-0/cp0/e15/q65/c0.5.206.206/p206x206/15094885_10154190421102569_5684360964840892031_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=628f9f5ea82b98370a04ef1432d7675e&amp;oe=588800C5" width="102"/></a><a class="em en" href="/photo.php?fbid=10154190421187569&amp;id=704252568&amp;set=pcb.10154190424062569&amp;source=48&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371" style="top:104px; left:0px; width: 102px; height: 101px;"><img alt="Image may contain: 1 person" class="eo img" height="101" src="https://scontent.fper1-1.fna.fbcdn.net/v/t1.0-0/cp0/e15/q65/c0.31.720.713/s206x206/15073548_10154190421187569_8056417791165495524_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=59243ab351789fadcde55f6877c38ab6&amp;oe=58BDBBF6" width="102"/></a><a class="em en" href="/photo.php?fbid=10154190421242569&amp;id=704252568&amp;set=pcb.10154190424062569&amp;source=48&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371" style="top:0px; left:104px; width: 101px; height: 68px;"><img alt="Image may contain: 1 person , indoor" class="eo img" height="68" src="https://scontent.fper1-1.fna.fbcdn.net/v/t1.0-0/cp0/e15/q65/c0.0.960.646/s206x206/15094274_10154190421242569_6105890550990412822_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=c91fbc8ed22c408552bd29f549af2445&amp;oe=588A015B" width="101"/></a><a class="em en" href="/photo.php?fbid=10154190421327569&amp;id=704252568&amp;set=pcb.10154190424062569&amp;source=48&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371" style="top:70px; left:104px; width: 101px; height: 67px;"><img alt="Image may contain: 1 person , people smiling" class="eo img" height="67" src="https://scontent.fper1-1.fna.fbcdn.net/v/t1.0-0/cp0/e15/q65/c0.0.960.637/s206x206/15032192_10154190421327569_7408952378144941211_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=45f37d60a43530f21a12ff4d165fd16a&amp;oe=58BE6EB5" width="101"/></a><a class="em en" href="/photo.php?fbid=10154190421422569&amp;id=704252568&amp;set=pcb.10154190424062569&amp;source=48&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371" style="top:138px; left:104px; width: 101px; height: 67px;"><img alt="Image may contain: 1 person" class="eo img" height="67" src="https://scontent.fper1-1.fna.fbcdn.net/v/t1.0-0/cp0/e15/q65/c0.0.960.637/s206x206/15036438_10154190421422569_3636469773080857751_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=3c55acaf0c4c0fd69e630c1552079ba9&amp;oe=588BD3C3" width="101"/></a></div></div></div><div class="dx"><div class="ck fcg"><abbr>10 hrs</abbr><span aria-hidden="true">· </span><span class="dy"><span><span class="ck">Friends</span></span></span></div><div class="ck fcg"><span class="ck fcg"><a aria-label="10 reactions, including Like" class="dz ea" href="/story.php?story_fbid=10154190424062569&amp;id=704252568&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371"><span class="eb"><img class="img" height="13" src="https://static.xx.fbcdn.net/rsrc.php/v3/yb/r/9ivHMFTOv59.png" width="13"/></span>10</a><span aria-hidden="true">· </span><a href="/a/like.php?ul&amp;aftercursorr=1479168053%3A1479168053%3A2%3A-938205180417529560%3A1479159808%3A6352978418298650730&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=10154190424062569&amp;av=100009834785112&amp;gfid=AQAXyKQ6J0A7g23z&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371">Like</a><span aria-hidden="true">· </span><a href="/reactions/picker/?ft_id=10154190424062569&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;aftercursor=MTQ3OTE2ODA1MzoxNDc5MTY4MDUzOjI6LTkzODIwNTE4MDQxNzUyOTU2MDoxNDc5MTU5ODA4OjYzNTI5Nzg0MTgyOTg2NTA3MzA%3D&amp;tab=h_nor&amp;av=100009834785112&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371&amp;refid=8">React</a></span><span aria-hidden="true">· </span><a class="ea" href="/story.php?story_fbid=10154190424062569&amp;id=704252568&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371">Comment</a><span aria-hidden="true">· </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009834785112&amp;sid=10154190424062569&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371">Share</a><span aria-hidden="true">· </span><a href="/story.php?story_fbid=10154190424062569&amp;id=704252568&amp;bacr=1479168053%3A1479168053%3A2%3A-938205180417529560%3A1479159808%3A6352978418298650730&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371#footer_action_list">Full Story</a><span aria-hidden="true">· </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQwNDUxtDQwMTIxMDMyNbOsc80rCS5JLCktdi5KTSzJzM8LLskvqqyrMweqMQWqsKjLiM_LL6ozqAMA%22%2C%22story_permalink_token%22%3A%22S%3A_I704252568%3A10154190424062569%22%7D&amp;redirect_uri=%2Fstories.php%3Faftercursorr%3D1479168053%253A1479168053%253A2%253A-938205180417529560%253A1479159808%253A6352978418298650730%26tab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.8704427389819539371">More</a></div></div></div><div class="cv cw dk" id="u_0_c" role="article"><div class="ep">Suggested Post</div><div><div><h3 class="dl dq"><span><strong><a href="/LenovoANZ/?_sref_=1261107940576324&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f&amp;__tn__=C">Lenovo Australia and New Zealand</a></strong></span></h3></div><div class="dr" style=""><span><p>Clicksational deals! 45% off select PCs till Friday. Powered by Intel Core Processors.</p></span></div><div class="dn do"><table class="l cm dt" role="presentation"><tbody><tr><td class="m"><a class="ec" href="http://lm.facebook.com/l.php?u=http%3A%2F%2Flnv.gy%2F2ejYYtJ&amp;h=CAQGu-Sbf&amp;enc=AZMkWbZYd2sVQLIwPEvmeRAoERTNcoQH40UMddbqBPXr-6kx2DkPLbdvEMo7e3aDAPD-7DRqiVj484El4CcpNx6nYEfY7d5pZpqfKDggSGSFwGlEQe2A6ym0WDGtl4DVk44dnLD9PoaybnKLpZ99d3rXwgW8c8HTQIOYCFrOckhb3RuY2UNqz5NlXDTAO69fMlaP1lV1CqDhRSGDZku8StrEDiBQvfizlY8A14mZY6VIbmLkuDgQhN_1JoyB4VO2lZKzX3aR5s9jH2VUsld5KZmDuGwGp5hmcYn5NzZkWET09j-8ko8whKTl0PgUfR-tW5HxP9TvjucC7ds_iQAejlmm22coye5d2SIeeT0uOAyU610-7tDDvq5Eja3wYAMEasUOsMxD0_KT-Jw6RsT8qrjJ&amp;s=1" target="_blank"><div class="ed ee ef"><table class="l cm" role="presentation"><tbody><tr><td class="m"><img class="img" height="125" src="https://external.fper1-1.fna.fbcdn.net/safe_image.php?d=AQDZTHqjgmr4NRdH&amp;w=250&amp;h=250&amp;url=http%3A%2F%2Fwww.facebook.com%2Fads%2Fimage%2F%3Fd%3DAQI3sGvYRtU2QiVJ8FQPr-QkdHdjHL64DQVsOqWHT8VmEHXbV_bBjiTi1G3F3PnJJtxxH59Sk-ucTaKVwpdfqqEv8FJ4WtjT7Oub2MOT9WVUeqe4GQCs7c3KES6YvvBazXDR_IArRiTrg1DgJZXv9MU6&amp;cfs=1&amp;jq=75&amp;ext=jpg" width="125"/></td></tr></tbody></table></div></a></td><td class="m"><a class="ec" href="http://lm.facebook.com/l.php?u=http%3A%2F%2Flnv.gy%2F2fpafLa&amp;h=0AQEBGEMW&amp;enc=AZPAqO0bDsOTYEY37DivpnwuvrLsXIGDJemgDHTOSN9rfBjBvSLHpAGqg_6QJMeXJRK1hhBOKqxInUNRnKWB_c9LmbCVs-u5Ik7ogLzwDmsOdn_jfXMoLCG8htV2mqQ5wl1FoJmzPo1Bj6QuX6_ZNZe87wiFg4rkIGgN-Bv1HF_7BowDRFJ397QbEo4HVsD3ZBkTwAzw9GQKn15FYzxQqfmy5ULY5ws70Wi9oxOb7VM78LkaZqg0WjvxOiq73ocbuCsacUaLbtO57W6F9Ap1joxi75de7ljx0dx-4_0txmJ87-eXrCgLrGqQAxWnKSaWsWBlkP84ahMU9Tm8T-gzVwH0ZPGAOQPk6rX7CDxQYwD_EN3MEekwdO_JHHjnA9j0k8vvDYkSNLV__CIpKMXZyNWd&amp;s=1" target="_blank"><div class="ed ee ef"><table class="l cm" role="presentation"><tbody><tr><td class="m"><img class="img" height="125" src="https://external.fper1-1.fna.fbcdn.net/safe_image.php?d=AQAgCM8oMXiBc8Yk&amp;w=250&amp;h=250&amp;url=http%3A%2F%2Fwww.facebook.com%2Fads%2Fimage%2F%3Fd%3DAQJyyttmTqqO310piVadjLbp6B1x0PFk8vVPGbGZ0ozS4qu6QkGw-z1aqHUDrx0t4NXnfcUniqgg1kU-z8L2Ea3qsN5Rtdw9tVYKO5_uX5BX8qKYZ2VHgzuixzjorV1mPe-cmr2ySK30PW3rUr0RaZAR&amp;cfs=1&amp;jq=75&amp;ext=jpg" width="125"/></td></tr></tbody></table></div></a></td></tr></tbody></table></div></div><div class="dx"><div class="ck fcg"><span class="dy"><span><span class="ck">Public</span></span></span></div><div class="ck fcg"><span class="ck fcg"><a href="/a/like.php?ul&amp;aftercursorr=1479167729%3A1479167729%3A1%3A8704427389819539371%3A1479129529%3A6352978418298650730&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=1261107940576324&amp;av=100009834785112&amp;gfid=AQBU_5OlmiATba96&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f">Like</a><span aria-hidden="true">· </span><a href="/reactions/picker/?ft_id=1261107940576324&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;aftercursor=MTQ3OTE2NzcyOToxNDc5MTY3NzI5OjE6ODcwNDQyNzM4OTgxOTUzOTM3MToxNDc5MTI5NTI5OjYzNTI5Nzg0MTgyOTg2NTA3MzA%3D&amp;tab=h_nor&amp;av=100009834785112&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f&amp;refid=8">React</a></span><span aria-hidden="true">· </span><a class="ea" href="/story.php?story_fbid=1261107940576324&amp;id=178555588831570&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f">Comment</a><span aria-hidden="true">· </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009834785112&amp;sid=1261107940576324&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f">Share</a><span aria-hidden="true">· </span><a class="ea" href="/a/profile.php?fan&amp;id=178555588831570&amp;origin=feed_story&amp;rb=1&amp;inlineSuggestionsOnLiking=1&amp;gfid=AQDRFevz725-M2gX&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f">Like Page</a><span aria-hidden="true">· </span><a href="/story.php?story_fbid=1261107940576324&amp;id=178555588831570&amp;bacr=1479167729%3A1479167729%3A1%3A8704427389819539371%3A1479129529%3A6352978418298650730&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f#footer_action_list">Full Story</a><span aria-hidden="true">· </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQyMzQ0MLc0MTA1NzM2MqlzzSsJzkgsSnUuSk0syczPCy7JL6qsM6wzNLcwBQILCwtjQ1Nzg7qM-Lz8ojqDOgA%22%2C%22story_permalink_token%22%3A%22S%3A_I391313867673164%3ASca_I1416107408639463_1_178555588831570_aToxMjYxMTA3OTQwNTcc2MzI0Ow%3D%3D_155_0_YTowOnt9_%3Aaca1ca%7Bica1261107940576324%3Bsca35ca%5C%22AI%5Cu0040736fdb68558f4fdb6eed7d9adbcc4b88f%5C%22%3B%7D%22%7D&amp;redirect_uri=%2Fstories.php%3Faftercursorr%3D1479167729%253A1479167729%253A1%253A8704427389819539371%253A1479129529%253A6352978418298650730%26tab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f">More</a><span aria-hidden="true">· </span><span>Sponsored</span></div></div><iframe class="eq" frameborder="0" height="0" scrolling="no" src="/xti.php?xt=2.qid.6352978418298650730%3Amf_story_key.-2640920147036930535%3Aei.AI%40736fdb68558f4fdb6eed7d9adbc4b88f" width="0"/></div><div class="cv cw dk" id="u_0_6" role="article"><div><div><h3 class="dl dm"><strong><a href="/amytomlinson916?fref=nf&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648&amp;__tn__=C">Amy Tomlinson</a></strong><img alt="" class="_52h1 img" height="16" src="https://static.xx.fbcdn.net/rsrc.php/v3/y2/r/l6S0LzNs7bU.png" width="16"/>feeling annoyed.</h3></div><div class="dr" style=""><span><p>PUBLIC NOTICE: when buying off gumtree or FB Pick up items when you say you are!!!! Two people have decided to back out last minute and another dragging their feet! It\'s a $5 bloody bookcase! C\'mon peeps!!!!!</p></span></div></div><div class="dx"><div class="ck fcg"><abbr>10 hrs</abbr><span aria-hidden="true">· </span><a class="er" href="/profile.php?id=108252552529332&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648">Perth</a><span aria-hidden="true">· </span><span class="dy"><span><span class="ck">Friends</span></span></span></div><div class="ck fcg"><span class="ck fcg"><a aria-label="3 reactions, including Like" class="dz ea" href="/story.php?story_fbid=10154204389392648&amp;id=663877647&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648"><span class="eb"><img class="img" height="13" src="https://static.xx.fbcdn.net/rsrc.php/v3/yb/r/9ivHMFTOv59.png" width="13"/></span>3</a><span aria-hidden="true">· </span><a href="/a/like.php?ul&amp;aftercursorr=1479167729%3A1479167729%3A2%3A6006507370414713614%3A1479166810%3A6352978418298650730&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=10154204389392648&amp;av=100009834785112&amp;gfid=AQDY-FS6dt2QcpAq&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648">Like</a><span aria-hidden="true">· </span><a href="/reactions/picker/?ft_id=10154204389392648&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;aftercursor=MTQ3OTE2NzcyOToxNDc5MTY3NzI5OjI6NjAwNjUwNzM3MDQxNDcxMzYxNDoxNDc5MTY2ODEwOjYzNTI5Nzg0MTgyOTg2NTA3MzA%3D&amp;tab=h_nor&amp;av=100009834785112&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648&amp;refid=8">React</a></span><span aria-hidden="true">· </span><a class="ea" href="/story.php?story_fbid=10154204389392648&amp;id=663877647&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648">3 Comments</a><span aria-hidden="true">· </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009834785112&amp;sid=10154204389392648&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648">Share</a><span aria-hidden="true">· </span><a href="/story.php?story_fbid=10154204389392648&amp;id=663877647&amp;bacr=1479167729%3A1479167729%3A2%3A6006507370414713614%3A1479166810%3A6352978418298650730&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648#footer_action_list">Full Story</a><span aria-hidden="true">· </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQwNDUxMjAxtrA0tjQyM7Goc80rCS5JLCktdi5KTSzJzM8LLskvqqyrMzMztjA3NzMxr8uIz8svqjOoAwA%22%2C%22story_permalink_token%22%3A%22S%3A_I663877647%3A10154204389392648%22%7D&amp;redirect_uri=%2Fstories.php%3Faftercursorr%3D1479167729%253A1479167729%253A2%253A6006507370414713614%253A1479166810%253A6352978418298650730%26tab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.2812927721426323471%3Aog_action_id.10154204389397648">More</a></div></div></div><div class="cv cw dk" id="u_0_7" role="article"><div><div><h3 class="dl dq"><span><strong><a href="/profile.php?id=100008713063313&amp;fref=nf&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809&amp;__tn__=C">Josh Risbey</a></strong></span></h3></div><div class="dr" style=""><span><p>Thats one goddamn bright moon</p></span></div><div class="dn do"><div class="ds dt"><a class="du dv dw" href="/photo.php?fbid=1632907667009653&amp;id=100008713063313&amp;set=a.1541282432838844.1073741831.100008713063313&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809&amp;__tn__=E"><img alt="Image may contain: sky, outdoor and nature" class="img" height="200" src="https://scontent.fper1-1.fna.fbcdn.net/v/t1.0-0/cp0/e15/q65/s403x403/15027588_1632907667009653_2582057655073292587_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=336d4a39d7952b8ee01eebf7180b19dc&amp;oe=58BF03D0" width="150"/></a></div></div></div><div class="dx"><div class="ck fcg"><abbr>11 hrs</abbr><span aria-hidden="true">· </span><span class="dy"><span><span class="ck">Friends</span></span></span></div><div class="ck fcg"><span class="ck fcg"><a aria-label="15 reactions, including Like and Love" class="dz ea" href="/story.php?story_fbid=1632907677009652&amp;id=100008713063313&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809"><span class="eb"><img class="img" height="13" src="https://static.xx.fbcdn.net/rsrc.php/v3/yb/r/9ivHMFTOv59.png" width="13"/><img class="img" height="13" src="https://static.xx.fbcdn.net/rsrc.php/v3/yJ/r/hscilVJwgd3.png" width="13"/></span>15</a><span aria-hidden="true">· </span><a href="/a/like.php?ul&amp;aftercursorr=1479167729%3A1479167729%3A3%3A2812927721426323471%3A1479130497%3A6352978418298650730&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=1632907677009652&amp;av=100009834785112&amp;gfid=AQDHUlbL-nh3nWwy&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809">Like</a><span aria-hidden="true">· </span><a href="/reactions/picker/?ft_id=1632907677009652&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;aftercursor=MTQ3OTE2NzcyOToxNDc5MTY3NzI5OjM6MjgxMjkyNzcyMTQyNjMyMzQ3MToxNDc5MTMwNDk3OjYzNTI5Nzg0MTgyOTg2NTA3MzA%3D&amp;tab=h_nor&amp;av=100009834785112&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809&amp;refid=8">React</a></span><span aria-hidden="true">· </span><a class="ea" href="/story.php?story_fbid=1632907677009652&amp;id=100008713063313&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809">1 Comment</a><span aria-hidden="true">· </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009834785112&amp;sid=1632907677009652&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809">Share</a><span aria-hidden="true">· </span><a href="/story.php?story_fbid=1632907677009652&amp;id=100008713063313&amp;bacr=1479167729%3A1479167729%3A3%3A2812927721426323471%3A1479130497%3A6352978418298650730&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809#footer_action_list">Full Story</a><span aria-hidden="true">· </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQzNrI0MDczNzcwsDQzNapzzSsJLkksKS12LkpNLMnMzwsuyS-qrKszNAACC3NDYwMzY2ND47qM-Lz8ojqDOgA%22%2C%22story_permalink_token%22%3A%22S%3A_I100008713063313%3A1632907677009652%22%7D&amp;redirect_uri=%2Fstories.php%3Faftercursorr%3D1479167729%253A1479167729%253A3%253A2812927721426323471%253A1479130497%253A6352978418298650730%26tab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.-1375437239838133809">More</a></div></div></div><div class="cv cw dk" id="u_0_8" role="article"><div><div><h3 class="dl dq"><span><strong><a href="/peter.owens.944?fref=nf&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.6486033685166472826&amp;__tn__=C">Peter Owens</a></strong></span></h3></div><div class="dr" style=""><span><p>Doesn\'t really do it justice, but it\'s nearly midnight and the brightest moon I\'ll  ever see.</p></span></div><div class="dn do"><div class="ds dt"><a class="du dv dw" href="/photo.php?fbid=1106157859500584&amp;id=100003191411289&amp;set=a.448239188625791.1073741825.100003191411289&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.6486033685166472826&amp;__tn__=E"><img alt="Image may contain: sky, cloud, night, outdoor and nature" class="img" height="200" src="https://scontent.fper1-1.fna.fbcdn.net/v/t1.0-0/cp0/e15/q65/s403x403/15095511_1106157859500584_2521435835755268315_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=385af85f23e4f53bd0137a6310128d89&amp;oe=588CDCB9" width="109"/></a></div></div></div><div class="dx"><div class="ck fcg"><abbr>8 hrs</abbr><span aria-hidden="true">· </span><span class="dy"><span><span class="ck">Friends</span></span></span></div><div class="ck fcg"><span class="ck fcg"><a href="/a/like.php?ul&amp;aftercursorr=1479167729%3A1479167729%3A4%3A-1375437239838133809%3A1479126751%3A6352978418298650730&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=1106157906167246&amp;av=100009834785112&amp;gfid=AQDMb4EPTtYvkJco&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.6486033685166472826">Like</a><span aria-hidden="true">· </span><a href="/reactions/picker/?ft_id=1106157906167246&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;aftercursor=MTQ3OTE2NzcyOToxNDc5MTY3NzI5OjQ6LTEzNzU0MzcyMzk4MzgxMzM4MDk6MTQ3OTEyNjc1MTo2MzUyOTc4NDE4Mjk4NjUwNzMw&amp;tab=h_nor&amp;av=100009834785112&amp;_ft_=qid.6352978418298650730%3Amf_story_key.6486033685166472826&amp;refid=8">React</a></span><span aria-hidden="true">· </span><a class="ea" href="/story.php?story_fbid=1106157906167246&amp;id=100003191411289&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.6486033685166472826">Comment</a><span aria-hidden="true">· </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009834785112&amp;sid=1106157906167246&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.6486033685166472826">Share</a><span aria-hidden="true">· </span><a href="/story.php?story_fbid=1106157906167246&amp;id=100003191411289&amp;bacr=1479167729%3A1479167729%3A4%3A-1375437239838133809%3A1479126751%3A6352978418298650730&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.6486033685166472826#footer_action_list">Full Story</a><span aria-hidden="true">· </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQ0MDM0NbcEkmbmRiZmda55JcEliSWlxc5FqYklmfl5wSX5RZV1dYYGQGBsaGloYmhoZGFZlxGfl19UZ1AHAA%22%2C%22story_permalink_token%22%3A%22S%3A_I100003191411289%3A1106157906167246%22%7D&amp;redirect_uri=%2Fstories.php%3Faftercursorr%3D1479167729%253A1479167729%253A4%253A-1375437239838133809%253A1479126751%253A6352978418298650730%26tab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.6486033685166472826">More</a></div></div></div><div class="cv cw dk" id="u_0_9" role="article"><div><div><h3 class="dl dm"><strong><a href="/simon.vanderschaar?fref=nf&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.1597349161213069553&amp;__tn__=C">Simon Van Der Schaar</a></strong>shared a <a href="/story.php?story_fbid=10210051690822659&amp;id=1048330581&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.1597349161213069553&amp;__tn__=C">link</a>.</h3></div><div class="dn do"><a class="ec dt" href="http://lm.facebook.com/l.php?u=http%3A%2F%2Fwww.givemesport.com%2F916094-video-emerges-of-mesut-ozil-humiliating-great-players%3Fautoplay%3Don%26utm_source%3DFacebook%26utm_medium%3DOrganic-Social%26utm_campaign%3DTribute-Pages-laika-III-1sted&amp;h=gAQHx1s3A&amp;enc=AZM-8MWcidFyCBQVjkQIj1ZlBZANR4K8B3eI4fye__GTy_m43B3kjf8Zd3I2WdGMnshqn0jvcfQF9f1A2xlMgRxIPkzzbWLM4svunTIjPLBb7cCe1pv3Xhz3uTF05hF7oiPVvlecN0ViE5GYXngpVRiJ&amp;s=1" id="u_0_a" target="_blank"><div class="ed ee ef"><table class="l bt" role="presentation"><tbody><tr><td class="m eg"><img class="img" height="112" role="presentation" src="https://external.fper1-1.fna.fbcdn.net/safe_image.php?d=AQCUXYpQ5GbXXfub&amp;w=224&amp;h=224&amp;url=https%3A%2F%2Fwww.facebook.com%2Fads%2Fimage%2F%3Fd%3DAQIPGjxxnzONBv39NEijwyj1PPviNfDXe8-KX-Qll-JXxKL3HqQuQDk4Y7aLTbSoneYJU4stiNtyTcDkxwQMM-5a_T8OQzepVtbh-WUdMzmVItFMHhDu0zvpBniQi3ZYzw0EGKBi-ZrWE76wQUxwK-mZ&amp;cfs=1&amp;jq=75&amp;ext=jpg" width="112"/></td><td class="r"><h3 class="eh dq ei">Video of Mesut Ozil humiliating great players proves he’s the boss</h3><div class="ej ek">www.givemesport.com<div class="ej"/></div></td></tr></tbody></table></div></a></div></div><div class="dx"><div class="ck fcg"><abbr>7 hrs</abbr><span aria-hidden="true">· </span><span class="dy"><span><span class="ck">Friends</span></span></span></div><div class="ck fcg"><span class="ck fcg"><a href="/a/like.php?ul&amp;aftercursorr=1479167729%3A1479167729%3A5%3A6486033685166472826%3A1479138746%3A6352978418298650730&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=10210051690862660&amp;av=100009834785112&amp;gfid=AQDr7jNS1qOCWOGl&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.1597349161213069553">Like</a><span aria-hidden="true">· </span><a href="/reactions/picker/?ft_id=10210051690862660&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;aftercursor=MTQ3OTE2NzcyOToxNDc5MTY3NzI5OjU6NjQ4NjAzMzY4NTE2NjQ3MjgyNjoxNDc5MTM4NzQ2OjYzNTI5Nzg0MTgyOTg2NTA3MzA%3D&amp;tab=h_nor&amp;av=100009834785112&amp;_ft_=qid.6352978418298650730%3Amf_story_key.1597349161213069553&amp;refid=8">React</a></span><span aria-hidden="true">· </span><a class="ea" href="/story.php?story_fbid=10210051690862660&amp;id=1048330581&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.1597349161213069553">Comment</a><span aria-hidden="true">· </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009834785112&amp;sid=10210051690822659&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.1597349161213069553">Share</a><span aria-hidden="true">· </span><a href="/story.php?story_fbid=10210051690862660&amp;id=1048330581&amp;bacr=1479167729%3A1479167729%3A5%3A6486033685166472826%3A1479138746%3A6352978418298650730&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.1597349161213069553#footer_action_list">Full Story</a><span aria-hidden="true">· </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQwMjQwMDU0szSwMDMyMzOoc80rCS5JLCktdi5KTSzJzM8LLskvqqyrMzQwsTA2NjC1MKzLiM_LL6ozqAMA%22%2C%22story_permalink_token%22%3A%22S%3A_I1048330581%3A10210051690862660%22%7D&amp;redirect_uri=%2Fstories.php%3Faftercursorr%3D1479167729%253A1479167729%253A5%253A6486033685166472826%253A1479138746%253A6352978418298650730%26tab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6352978418298650730%3Amf_story_key.1597349161213069553">More</a></div></div></div></div></div></div></div></div></div></body></html>';
    		aid.doTest(done, html, (data) => data.length.should.equal(8));
    	});

		it('event invitations should be skipped...', (done) => {
			let html = '<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Facebook</title></head><body tabindex="0" class="b c d e"><div class="f"><div id="viewport"><div id="objects_container"><div class="bf e" id="root" role="main"><div id="m_newsfeed_stream"><div class="dv"></div><div id="m-top-of-feed"></div><div class="dw dx dy"><div role="article" class="cv cx dz" data-ft="&#123;&quot;qid&quot;:&quot;6383068632051463587&quot;,&quot;mf_story_key&quot;:&quot;-350485628152912412&quot;,&quot;top_level_post_id&quot;:&quot;207784649691308&quot;&#125;" id="u_0_3"><div><div><h3 class="ea eb"><strong><a href="/michelle.t.dunn?fref=nf&amp;refid=8&amp;_ft_=qid.6383068632051463587%3Amf_story_key.-350485628152912412%3Atop_level_post_id.207784649691308&amp;__tn__=C">Michelle T Dunn</a></strong>, <strong><a href="/kylie.jakins?fref=nf&amp;refid=8&amp;_ft_=qid.6383068632051463587%3Amf_story_key.-350485628152912412%3Atop_level_post_id.207784649691308&amp;__tn__=C">Kylie Jakins</a></strong> and <a href="/browse/users/?ids=1027560438%2C670884891&amp;refid=8&amp;_ft_=qid.6383068632051463587%3Amf_story_key.-350485628152912412%3Atop_level_post_id.207784649691308&amp;__tn__=C">2 others</a> are going to an event.</h3></div><div class="ed ee"><div class="cy cz er eg"><a class="es" href="/events/207114873091619?acontext=%7B%22ref%22%3A%223%22%2C%22action_history%22%3A%22null%22%7D&amp;aref=3&amp;refid=8&amp;_ft_=qid.6383068632051463587%3Amf_story_key.-350485628152912412%3Atop_level_post_id.207784649691308&amp;__tn__=H"><table class="l bs" role="presentation"><tbody><tr><td class="m ey et"><div class="ez"><div class="fa fb">18</div><div class="fc">FEB</div></div></td><td class="r"><h3 class="eu db ev">Dan&#039;s 30th</h3><h3 class="df eb fd"><div class="fe">Sat <span>9:00</span></div></h3><div class="df ew"><a href="/daniel.bruszewski?refid=8">Daniel P Bruszewski</a> invited you</div></td></tr></tbody></table></a><div><a class="eu" href="/a/events/join.php?acontext=%7B%22source%22%3A3%2C%22action_history%22%3A%22null%22%7D&amp;ctx=feed&amp;id=207114873091619&amp;nid=u_0_5&amp;gfid=AQDFHtv4ajzVDwtI&amp;refid=8&amp;_ft_=qid.6383068632051463587%3Amf_story_key.-350485628152912412%3Atop_level_post_id.207784649691308&amp;__tn__=%2AJ">View Event</a></div></div></div></div><div class="ek"><div class="cj ck"><abbr>13 hrs</abbr><span aria-hidden="true"> · </span><span class="em"><span><span class="cj">Invitation Only</span></span></span></div><div class="cj ck"><a href="/save/story/basic/?story_id=S%3A_I635161056504208_1830882281%3A10206555172637974_742033622%3A10155087746948623_1027560438%3A10209879817125232_670884891%3A10154784581734892_635161056504208_0_1830882281&amp;action=SAVE&amp;surface=mbasic_story&amp;mechanism=ufi_action_link&amp;tab=h_nor&amp;after_cursor=MTQ4NjE3Mzk3ODoxNDg2MTczOTc4OjM6MjE0MjM0NjA2MjEwOTE3NjMwOjE0ODYwODUwMTY6NjM4MzA2ODYzMjA1MTQ2MzU4Nw%3D%3D&amp;ext=1486433179&amp;hash=AeRYbinFdUXOb7PN&amp;refid=8&amp;_ft_=qid.6383068632051463587%3Amf_story_key.-350485628152912412%3Atop_level_post_id.207784649691308">Save</a><span aria-hidden="true"> · </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22BcE7CkIxEAXQLc3PmZtWSGNh4wJESFCbBJ5BEMKs3XOEImBuxQsrIetY9dvHusz3uM7Wz49Pb7U9-23N45fJUAJEwDtMSNVFNpPEyckU24MAQ-F83cc8kvIP%22%2C%22story_permalink_token%22%3A%22S%3A_I635161056504208_1830882281%3A10206555172637974_742033622%3A10155087746948623_1027560438%3A10209879817125232_670884891%3A10154784581734892_635161056504208_0_1830882281%22%7D&amp;redirect_uri=%2Fstories.php%3Faftercursorr%3D1486173978%253A1486173978%253A3%253A214234606210917630%253A1486085016%253A6383068632051463587%26tab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6383068632051463587%3Amf_story_key.-350485628152912412%3Atop_level_post_id.207784649691308">More</a></div></div></div></div><a class="db w x ff fg fh" href="/stories.php?aftercursorr=1486173978%3A1486173978%3A4%3A-350485628152912412%3A1486124540%3A6383068632051463587&amp;tab=h_nor&amp;__m_log_async__=1&amp;refid=8"><span class="dj">See more stories</span></a></div></div></div></div></div></body></html>';
			aid.doTest(done, html, (data) => data.length.should.equal(0));
		});

    });

    describe('#Find Correct Full Story Url', function() {

        it('English ltr without Save button...', (done) => {
            let html = '<div class="dn do"><span class="dn do"><a class="ep eq" aria-label="Likes" href="/BobsBurgers/photos/a.156840434361927.31788.102666876445950/1181347548577872/?type=3&amp;refid=7&amp;_ft_=qid.6337124096290731331%3Amf_story_key.-7253774342841589229"><span class="er"><img src="https://static.xx.fbcdn.net/rsrc.php/v3/yC/r/9RmeZ1lDDHz.png" class="s" height="13" width="13"><img src="https://static.xx.fbcdn.net/rsrc.php/v3/yN/r/kCdcNJ9NPix.png" class="s" height="13" width="13"><img src="https://static.xx.fbcdn.net/rsrc.php/v3/yC/r/V01I-JIzH6y.png" class="s" height="13" width="13"></span>4,386</a><span aria-hidden="true"> · </span><a href="/a/like.php?ul&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=1181347548577872&amp;av=100009325585945&amp;gfid=AQDZ2oa9XivFJvKz&amp;refid=7&amp;_ft_=qid.6337124096290731331%3Amf_story_key.-7253774342841589229">Like</a><span aria-hidden="true"> · </span><a href="/reactions/picker/?ft_id=1181347548577872&amp;origin_uri=https%3A%2F%2Fm.facebook.com%2Fhome.php%3Fref_component%3Dmbasic_home_header%26ref_page%3DXMenuController&amp;tab=h_nor&amp;av=100009325585945&amp;_ft_=qid.6337124096290731331%3Amf_story_key.-7253774342841589229&amp;refid=7">React</a></span><span aria-hidden="true"> · </span><a class="eq" href="/BobsBurgers/photos/a.156840434361927.31788.102666876445950/1181347548577872/?type=3&amp;refid=7&amp;_ft_=qid.6337124096290731331%3Amf_story_key.-7253774342841589229">222 Comments</a><span aria-hidden="true"> · </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=100009325585945&amp;sid=1181347548577872&amp;m=self&amp;exit_uri=https%3A%2F%2Fm.facebook.com%2Fhome.php%3Fref_component%3Dmbasic_home_header%26ref_page%3DXMenuController&amp;cwevent=composer_entry&amp;av=100009325585945&amp;view_overview&amp;refid=7&amp;_ft_=qid.6337124096290731331%3Amf_story_key.-7253774342841589229">Share</a><span aria-hidden="true"> · </span><a href="/BobsBurgers/photos/a.156840434361927.31788.102666876445950/1181347548577872/?type=3&amp;bacr=1475476263%3A1475476263%3A1%3A-7253774342841589229%3A1475442181%3A0&amp;refid=7&amp;_ft_=qid.6337124096290731331%3Amf_story_key.-7253774342841589229#footer_action_list">Full Story</a><span aria-hidden="true"> · </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22BcHBCoAgDADQX3Kmzq6C1wiic0iTPIQL26XLvr33ACJMDr2LHjGi1dxlbSy8PzcXSkXOtjDVVN5Kma66CY9PFYwNIUQMzvnZG21H56FGfw%22%2C%22story_permalink_token%22%3A%22S%3A_I102666876445950%3A1181347548577872%3A0%22%7D&amp;redirect_uri=%2Fstories.php%3Ftab%3Dh_nor&amp;refid=7&amp;_ft_=qid.6337124096290731331%3Amf_story_key.-7253774342841589229">More</a></div>';

            var handler = new htmlparser.DomHandler(function (error, dom) {
                if (!error) {
                    let fullStoryUrl = subject.extractFullStoryUrl(dom[0]);
                    let expected = '/BobsBurgers/photos/a.156840434361927.31788.102666876445950/1181347548577872/?type=3&bacr=1475476263%3A1475476263%3A1%3A-7253774342841589229%3A1475442181%3A0&refid=7&_ft_=qid.6337124096290731331%3Amf_story_key.-7253774342841589229#footer_action_list';
                    expected.should.equal(fullStoryUrl);
                    done();
                }
            });

            var parser = new htmlparser.Parser(handler, { recognizeSelfClosing: true })
            parser.write(html)
            parser.done()
        });

        it('English ltr with Save button...', (done) => {
            let html = '<div class="ck fcg"><span class="ck fcg"><a href="/a/like.php?ul&amp;tab=h_nor&amp;actionsource=feed&amp;ft_ent_identifier=10153716221646923&amp;av=584740915&amp;gfid=AQA6p7km2DBCDFua&amp;refid=8&amp;_ft_=qid.6337061934667063497%3Amf_story_key.-3999467968305100695">Like</a><span aria-hidden="true"> · </span><a href="/reactions/picker/?ft_id=10153716221646923&amp;origin_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;tab=h_nor&amp;av=584740915&amp;_ft_=qid.6337061934667063497%3Amf_story_key.-3999467968305100695&amp;refid=8">React</a></span><span aria-hidden="true"> · </span><a class="ef" href="/story.php?story_fbid=10153716221646923&amp;id=648436922&amp;refid=8&amp;_ft_=qid.6337061934667063497%3Amf_story_key.-3999467968305100695">Comment</a><span aria-hidden="true"> · </span><a href="/composer/mbasic/?c_src=share&amp;referrer=feed&amp;target=584740915&amp;sid=10153716221651923&amp;m=self&amp;exit_uri=https%3A%2F%2Fmbasic.facebook.com%2F&amp;cwevent=composer_entry&amp;av=584740915&amp;view_overview&amp;refid=8&amp;_ft_=qid.6337061934667063497%3Amf_story_key.-3999467968305100695">Share</a><span aria-hidden="true"> · </span><a href="/story.php?story_fbid=10153716221646923&amp;id=648436922&amp;bacr=1475462208%3A1475462208%3A1%3A-3999467968305100695%3A1475462042%3A0&amp;refid=8&amp;_ft_=qid.6337061934667063497%3Amf_story_key.-3999467968305100695#footer_action_list">Full Story</a><span aria-hidden="true"> · </span><a href="/save/story/basic/?story_id=S%3A_I648436922%3A10153716221646923&amp;action=SAVE&amp;surface=mbasic_story&amp;mechanism=ufi_action_link&amp;tab=h_nor&amp;ext=1475721410&amp;hash=AeTGSatIkXiIPNdy&amp;refid=8&amp;_ft_=qid.6337061934667063497%3Amf_story_key.-3999467968305100695">Save</a><span aria-hidden="true"> · </span><a href="/nfx/basic/direct_actions/?context_str=%7B%22breadcrumbs%22%3A%5B%5D%2C%22story_location%22%3A%22feed%22%2C%22is_from_feed_tombstone%22%3Afalse%2C%22actions_taken%22%3A%22%22%2C%22is_rapid_reporting%22%3Afalse%2C%22hideable_token%22%3A%22MzQwNDU2NzQzMjI0MzGzNDKuc80rCS5JLCktdi5KTSzJzM8LLskvqqyrMzOxMDEGqjCqy4jPyy-qM6gDAA%22%2C%22story_permalink_token%22%3A%22S%3A_I648436922%3A10153716221646923%22%7D&amp;redirect_uri=%2Fstories.php%3Ftab%3Dh_nor&amp;refid=8&amp;_ft_=qid.6337061934667063497%3Amf_story_key.-3999467968305100695">More</a></div>';

            var handler = new htmlparser.DomHandler(function (error, dom) {
                if (!error) {
                    let fullStoryUrl = subject.extractFullStoryUrl(dom[0]);
                    let expected = '/story.php?story_fbid=10153716221646923&id=648436922&bacr=1475462208%3A1475462208%3A1%3A-3999467968305100695%3A1475462042%3A0&refid=8&_ft_=qid.6337061934667063497%3Amf_story_key.-3999467968305100695#footer_action_list';
                    expected.should.equal(fullStoryUrl);
                    done();
                }
            });

            var parser = new htmlparser.Parser(handler, { recognizeSelfClosing: true });
            parser.write(html);
            parser.done();
        });
    });
});