import {Action} from '../../src/data/action.es6'
import {Comment} from '../../src/data/comment.es6'
import {FacebookAlbumHandler} from '../../src/facebook/FacebookAlbumHandler';
import {Media} from '../../src/data/media.es6';
import {Post} from '../../src/data/post.es6';
import {TestAid} from '../env/testAid.es6';

let subject = null;
let aid = new TestAid();
let chai = require('chai')
let htmlparser = require('htmlparser2')

let CHARSET_TEST = '&charset_test=€,´,€,´,水,Д,Є'

describe('FacebookAlbumHandling ', function() {
  
  chai.should();
  this.error = (error) => assert('Error thrown', false);

  var execute = (html) => {
    var parser = new htmlparser.Parser(subject, { recognizeSelfClosing: true });
    parser.write(html)
    parser.done()
  }
  
  var doTest = (done, html, expectedPost) => {
    subject = new FacebookAlbumHandler((error, data) => {
      // Propagate error
      if (error) {
        this.error(error)
      }

      // Validate the data
      aid.validate(expectedPost, data.post)

      // Successful
      done();
    })
    execute(html)
  }
  
  describe('#parse', function() {
    
    it('multiple photos', function(done) {
      let pageUrl = 'https://mbasic.facebook.com/Genesis67/albums/10153444997998716/?bacr=1455500538%3A1455500538%3A4%3A6184530279428542009%3A1455500372%3A0%3A0%3A240&refid=7&_ft_=qid.6251327765056411284%3Amf_story_key.4007639146097054289#footer_action_list'
      let html = '<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Las Vegas Feb 2016</title></head><body tabindex="0" class="b c d e f"><div class="g"><div id="viewport"><div id="objects_container"><div id="root" role="main" class="f"><table class="m"><tbody><tr><td class="t"><div class="bg bh"><div class="bi bj"><div><table cellspacing="0" cellpadding="0" class="bk"><tr><td valign="top"><div class="bl"><div class="bm bn bo">Las Vegas Feb 2016</div><span class="bp bq br"><abbr>4 minutes ago</abbr> in <a href="/profile.php?id=106115646085999">Spring Valley, Nevada</a><span aria-hidden="true"> · </span><span>Privacy:&nbsp;Friends</span><span aria-hidden="true"> · </span><a class="bs" href="/a/post/subscribe/?subscribe=1&amp;ft_ent_identifier=10153444997998716&amp;gfid=AQCWBDA24z3WwoUO">Get notifications</a></span><div class="bt"></div></div></td><td valign="top" class="bu"></td></tr></table></div><div></div><div class="bv"><div style="text-align:center;" id="thumbnail_area"><a class="bw bx" href="/photo.php?fbid=10153444997463716&amp;id=548573715&amp;set=a.10153444997998716.1073741840.548573715&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xfp1/v/t1.0-0/cp0/e15/q65/c17.0.100.100/p100x100/12728788_10153444997463716_786225139724908608_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=44e8e8d491623be67e9639344068cf45&amp;oe=5722B5DA" width="72" height="72" class="by s" /></a><a class="bw bx" href="/photo.php?fbid=10153444997503716&amp;id=548573715&amp;set=a.10153444997998716.1073741840.548573715&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xla1/v/t1.0-0/cp0/e15/q65/c0.12.100.100/p100x100/10402781_10153444997503716_2842658814730989936_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=1006a6013d6811107778d4323e79a887&amp;oe=57626CF2" width="72" height="72" class="by s" /></a><a class="bw bx" href="/photo.php?fbid=10153444997563716&amp;id=548573715&amp;set=a.10153444997998716.1073741840.548573715&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xla1/v/t1.0-0/cp0/e15/q65/c17.0.100.100/p100x100/12745470_10153444997563716_8060953545024503014_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=a310108069f21838accc626099c6f5b7&amp;oe=576DD014" width="72" height="72" class="by s" /></a></div></div><div></div><div class="bz ca"><div class="cb cc cd"><table class="m ce"><tbody><tr><td class="t cf cg" style="width:33%"><a class="ch y ci cj" href="/a/like.php?ul&amp;perm&amp;ifab&amp;ft_ent_identifier=10153444997998716&amp;av=100009834785112&amp;gfid=AQAYU8RpBN-HXSiG&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yy/r/bS6xjtWYG5B.png" width="16" height="16" class="ck cl cm s" /><span class="cn">Like</span></a></td><td class="t cf cg" style="width:33%"><a class="ch y ci cj" href="#composer-10153444997998716"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yJ/r/WVqnrazUGJ1.png" width="16" height="16" class="ck cl cm s" /><span class="cn">Comment</span></a></td><td class="t cf co cg" style="width:33%"><a class="ch y ci cj" href="/composer/mbasic/?c_src=share&amp;referrer=permalink&amp;target=100009834785112&amp;sid=10153444997998716&amp;m=self&amp;exit_uri=https%3A%2F%2Fm.facebook.com%2FGenesis67%2Falbums%2F10153444997998716%2F%3Fbacr%3D1455500538%253A1455500538%253A4%253A6184530279428542009%253A1455500372%253A0%253A0%253A240%26refid%3D8%26_ft_%3Dqid.6251327210952600239%253Amf_story_key.4007639146097054289&amp;cwevent=composer_entry&amp;av=100009834785112&amp;view_overview&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yR/r/fcu1kGV0Vi2.png" width="16" height="16" class="ck cl cm s" /><span class="cn">Share</span></a></td></tr></tbody></table></div></div></div></div></td></tr></tbody></table></div></div></div></div></body></html>'
      doTest(done
        , html
        , {
            multiplePhotos: [
              '/photo.php?fbid=10153444997463716&amp;id=548573715&amp;set=a.10153444997998716.1073741840.548573715&amp;source=56',
              '/photo.php?fbid=10153444997503716&amp;id=548573715&amp;set=a.10153444997998716.1073741840.548573715&amp;source=56',
              '/photo.php?fbid=10153444997563716&amp;id=548573715&amp;set=a.10153444997998716.1073741840.548573715&amp;source=56'
            ]
        }
      )
    })
    
    
    it('actions', function(done) {
      let pageUrl = 'https://m.facebook.com/teest.devisd/albums/1547833552211412/?_rdr#1548823625445738'
      let html = '<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>TestAlbum</title><meta name="referrer" content="default" id="meta_referrer" /><style type="text/css">/*<![CDATA[*/.bh .cb{margin:6px -6px 0;}.bh.bi .cb{margin:6px -9px 0;}.bh .cf{margin:6px -4px -4px;}.b .m{border:0;border-collapse:collapse;margin:0;padding:0;width:100%;}.b .m tbody,.b .df>tr>td,.b .df>tbody>tr>td,.b .m td.df{vertical-align:top;}.b .ck>tr>td,.b .ck>tbody>tr>td,.b .m td.ck{vertical-align:middle;}.b .m td{padding:0;}.b .m td.w{padding:2px;}.b .m td.bg{padding:4px;}.b .t{width:100%;}.cs{background:#f6f7f8;}.bf{background:#fff;}.b .dv{padding:0;}.b .w{padding:2px;}.b .bg{padding:4px;}.bj{width:100%;}.bj .bt{text-align:right;}.bu{font-size:small;margin-top:0;}.b a,.b a:visited{color:#3b5998;text-decoration:none;}.b .br,.b .br:visited{color:#6d84b4;}.b .bd,.b .bd:visited{color:#fff;}.b a:focus,.b a:hover,.b .br:focus,.b .br:hover{background-color:#3b5998;color:#fff;}.b .bd:focus,.b .bd:hover{background-color:#fff;color:#3b5998;}.b .cj{border-color:#ddd;border-width:1px 0 0;}.b .cj .cl{background-color:#f6f7f8;}.b .cj .cl:hover,.b .cj .cl:hover .cn{background-color:#e9eaed;}.b .cj .cn{background-color:inherit;}.cu>div{border-top:1px solid rgba(0, 0, 0, .101);}.cu>.cu>div:first-child{border-top:none;}.ct{background-color:#f6f7f8;color:#141823;}.dd{border-bottom:1px solid #ddd;}.b .dd{padding-bottom:8px;}.z{-webkit-appearance:none;background:none;display:inline-block;font-size:12px;height:28px;line-height:28px;margin:0;overflow:visible;padding:0 9px;text-align:center;vertical-align:top;white-space:nowrap;}.b .z{border-radius:2px;}.bx,a.bx,.b a.bx,.b a.bx:visited{background-color:#f6f7f8;color:#4e5665;}.b a.bx:hover,.b .bx:hover{background-color:#e9eaed;color:#4e5665;}.b .bx{border:1px solid #bdc1c9;}.z[disabled] .by{opacity:.3;}.bx[disabled]{color:#bdc1c9;}.b .bx[disabled]:hover{background-color:#f6f7f8;color:#bdc1c9;}.bb,a.bb,html .b a.bb{color:#fff;}.b .bb{background-color:#4e69a2;border:1px solid #385490;}.b a.bb:hover,.b .bb:hover{background-color:#465e91;}.bb[disabled]{color:#899bc1;}.b .bb[disabled]:hover{background-color:#4e69a2;}.z .ca{display:inline-block;}.b .z .ca{display:inline-block;margin-top:0;vertical-align:middle;}.b a.z::after,.b .z.bv::after{content:"";display:inline-block;height:100%;vertical-align:middle;}html .z .by{vertical-align:top;}.z .ca{line-height:20px;margin-top:4px;}.z .by.bz{margin-top:8px;}.z .by.cq{margin-top:6px;}.z .by.du{margin-top:4px;}.z.bv{padding-left:8px;}.z.bv .by{margin-right:6px;}.z.bw{display:block;width:100%;}a.z.bw,.b label.z.bw{display:block;width:auto;}.b .z{padding:0 8px;}.b a.z{height:26px;line-height:26px;}.b a.z .by.bz{margin-top:7px;}.b a.z .by.cq{margin-top:5px;}.b a.z .by.du{margin-top:3px;}.b .z.bv{padding-left:7px;}.by,.s.by{display:inline-block;pointer-events:none;vertical-align:middle;}.ca{pointer-events:none;}.s{border:0;display:inline-block;vertical-align:top;}i.s u{position:absolute;width:0;height:0;overflow:hidden;}.cd{display:inline-block;margin:2px;overflow:hidden;position:relative;}.cd:after{border:1px solid rgba(0, 0, 0, .1);bottom:0;content:"";left:0;position:absolute;right:0;top:0;}.ce{background:#f2f2f2;}.cc:hover .ce{background:none;}.ci{border-color:#d3d6db #cdd0d6 #c0c4cc;border-style:solid;border-width:1px;}.ch .cn,.ch .cl{background-color:#fff;}.cl{background-color:#fff;position:relative;}.cl.cl.cl{padding:6px 0;}.cn{-webkit-appearance:none;border:none;margin:0;padding:0;}input.co,button.co{width:100%;}.cn{display:block;}.cn{background-color:#fff;color:#4e5665;font-size:small;text-align:center;white-space:nowrap;}.b .cl a.cn{color:#4e5665;}.b .cl a.cn:hover,.b .cl a.cn:focus{background:#f2f2f2;color:#4e5665;}.cl:hover,.cl:focus,.cl:hover .cn,.cl:focus .cn{background:#f2f2f2;}.cn{padding:0 4px;}.cl .cn .cp{display:block;margin:0 auto;}.cl .bv.cn .cp{margin:0 auto 1px;}.cl .ca{pointer-events:auto;}@-webkit-keyframes mPlatformDialogOauthV4_moveUp{from{opacity:1;transform:translateY(0%);}to{opacity:0;transform:translateY(10%);}}@-webkit-keyframes mPlatformDialogOauthV4_moveDown{from{opacity:0;transform:translateY(10%);}to{opacity:1;transform:translateY(0%);}}@media screen and (orientation:portrait){}@media only screen and (orientation: landscape){}.dc{padding:8px 8px 0;}.de{color:#141823;display:block;font-size:small;}.b .dc .dh table{border:none;}.b .dc .dl{border:1px solid #999;height:36px;padding:3px 3px 4px 0;width:98%;}.dn{padding-left:4px;}.dp{margin-top:4px;}form{margin:0;border:0;}.dg .dy{height:24px;line-height:24px;margin-left:2px;}.dj{background:#fff;}.dg .dm{background-color:transparent;color:#4e5665;display:block;padding:0;width:100%;}.dt .s{display:block;}.dg .di .dx{padding:2px;}.dg .di .dt{padding:4px;}.b .dg .di{border:1px solid #9197a3;}.v{border:0;display:block;margin:0;padding:0;}.bq{color:gray;}.bp{font-size:small;}body,tr,input,textarea,.g{font-size:medium;}.bn{word-wrap:break-word;}.bs{margin-top:8px;}.bk .bo{font-size:x-small;}.bk .bs{font-size:small;margin:6px 0;}.cx{color:#9197a3;}.bl{font-size:12px;line-height:16px;}.cy{font-weight:normal;}.bm{font-weight:bold;}@-webkit-keyframes highlightFade{0%{background:#fff9d7;}50%{background:#fff9d7;}100%{background:transparent;}}body{text-align:left;direction:ltr;}body,tr,input,textarea,button{font-family:sans-serif;}body,p,figure,h1,h2,h3,h4,h5,h6,ul,ol,li,dl,dd,dt{margin:0;padding:0;}h1,h2,h3,h4,h5,h6{font-size:1em;font-weight:bold;}ul,ol{list-style:none;}article,aside,figcaption,figure,footer,header,nav,section{display:block;}.d #viewport{margin:0 auto;max-width:600px;}.i{background-color:#3b5998;}.f{background:#dcdee3;}#page{position:relative;}.r,.r.s{display:block;}.o{display:block;}.p{height:20px;width:20px;}.k{background:#3b5998;padding:0 4px 4px;height:22px;}.k.k .x{background:#fff;border:1px solid #243872;box-sizing:border-box;font-size:small;height:22px;margin:0;padding:0;width:100%;}.l.k{padding:1px 1px 3px;}.k .q{padding:1px 3px 0 0;}.k.k.k .ba{background:#627aba;border:1px solid #2e417e;color:#fff;font-size:x-small;font-weight:normal;margin-left:3px;height:22px;line-height:20px;}.j{padding:2px 3px;}.dq{font-size:small;padding:7px 8px 8px;}.ec{display:block;margin-top:8px;padding:2px;text-align:center;}.ea{display:block;font-size:x-small;margin:-3px -3px 1px -3px;padding:3px;}.b .dq td.dz{padding-right:4px;}.b .dq td.eb{padding-left:4px;}.dq.dr{background-color:#4e5665;}.dr{border-top:1px solid #373e4d;color:#bdc1c9;}.dr .ec{border:1px solid #bdc1c9;color:#bdc1c9;}.b .dr a,.b .dr a:visited{color:#bdc1c9;}.b .dr a:focus,.b .dr a:hover{background:#dcdee3;color:#141823;}.dr .ec:focus,.dr .ec:hover{background:#dcdee3;border:1px solid #dcdee3;color:#141823;}.ds{margin-bottom:8px;}.dq.dr .ds>table{background:#d3d7dc;border:1px solid #373e4d;}.dw{background:#d3d7dc;}.bc{padding-bottom:1px;}.be{display:inline-block;font-size:small;padding:2px 4px 2px;}/*]]>*/</style><link rel="manifest" href="/data/manifest" /></head><body tabindex="0" class="b c d e f"><div class="g"><div id="viewport"><div class="h"><div class="i j" id="header"><form method="get" class="k l" action="/search/"><input type="hidden" name="search" value="Search" /><input type="hidden" name="search_source" value="top_nav" /><table class="m"><tbody><tr><td class="n"><a class="o p q" href="/home.php?ref_component=mbasic_home_logo&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/ym/r/Gjhrhb7r0lb.png" width="20" height="20" class="r s" alt="Facebook logo" /></a></td><td class="t u"><input class="v w x" name="query" placeholder="Search Facebook" autocomplete="off" autocorrect="off" spellcheck="false" type="text" /></td><td class="n"><input value="Search" type="submit" class="y z ba bb" /></td></tr></tbody></table></form><div class="bc"><a class="bd be" accesskey="1" aria-label="Home" href="/home.php?a_type=sr&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController" style="display:block;height:0;overflow:hidden;position:absolute;width:0;padding:0">&nbsp;</a><a class="bd be" href="/home.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController" tabindex="-1" aria-hidden="1">Home</a><a class="bd be" href="/teest.devisd?v=info&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Edit Profile</a><a class="bd be" accesskey="2" href="/friends/center/mbasic/?fb_ref=tn&amp;sr=1&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Find Friends</a><a class="bd be" accesskey="4" href="/messages/?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Messages</a><a class="bd be" accesskey="3" href="/notifications.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Notifications</a><a class="bd be" accesskey="6" href="/buddylist.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Chat</a><a class="bd be" accesskey="5" href="/menu/bookmarks/?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Menu</a></div></div></div><div id="objects_container"><div id="root" role="main" class="f"><table class="m"><tbody><tr><td class="t"><div class="bf bg"><div class="bh bi"><div><table cellspacing="0" cellpadding="0" class="bj"><tr><td valign="top"><div class="bk"><div class="bl bm bn">TestAlbum</div><span class="bo bp bq"><abbr>Monday at 15:17</abbr><span aria-hidden="true"> · </span><span>Privacy:&nbsp;<a href="/privacy/selectorx/?fbid=1547833552211412&amp;selected_privacyx=291667064279714&amp;return_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F&amp;context=album_permalink">Friends</a></span><span aria-hidden="true"> · </span><a class="br" href="/a/post/subscribe/?subscribe&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQAz_6TRQQwXxtvk">Stop notifications</a></span><div class="bs">Test Album</div></div></td><td valign="top" class="bt"><div class="bu"><a href="/photos/edit/album/1547833552211412/?cancel_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F&amp;referrer=album_permalink">Edit</a></div></td></tr></table></div><div><a class="bv y z bw bx" href="/composer/mbasic/?c_src=add_photo_in_album&amp;referrer=add_photo_in_album&amp;target=100009543463363&amp;album_id=1547833552211412&amp;ctype=inline&amp;cwevent=composer_entry&amp;av=100009543463363&amp;icv=lgc_view_photo&amp;lgc_view_photo"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yr/r/kdqLgRkNCQu.png" width="12" height="12" class="by bz s" /><span class="ca">Add Photos</span></a></div><div class="cb"><div style="text-align:center;" id="thumbnail_area"><a class="cc cd" href="/photo.php?fbid=1547833355544765&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xtp1/v/t1.0-0/cp0/e15/q65/c233.0.315.315/s75x225/12729066_1547833355544765_2022898844229182395_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=fd49ac80690e85d2b78f0f3d29dbe695&amp;oe=5725BD30" width="72" height="72" class="ce s" /></a><a class="cc cd" href="/photo.php?fbid=1547833358878098&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xfl1/v/t1.0-0/cp0/e15/q65/c18.0.479.479/s75x225/1001072_1547833358878098_1351903127458013912_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=b4b9b6c186e097ddb36254fa529bd279&amp;oe=5770234B" width="72" height="72" class="ce s" /></a><a class="cc cd" href="/photo.php?fbid=1547833362211431&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xlp1/v/t1.0-0/cp0/e15/q65/c85.0.326.326/s75x225/12743988_1547833362211431_1456221009165092547_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=91f335c80f69bd3096825768d8814b3d&amp;oe=575FFA6B" width="72" height="72" class="ce s" /></a></div></div><div></div><div class="cf cg"><div class="ch ci cj"><table class="m ck"><tbody><tr><td class="t cl cm" style="width:33%"><a class="bv y cn co" href="/a/like.php?ul&amp;perm&amp;ifab&amp;ft_ent_identifier=1547833552211412&amp;av=100009543463363&amp;gfid=AQAZw2F7qECjJ2PE&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yy/r/P2H0Ng8Ff2w.png" width="16" height="16" class="cp by cq s" /><span class="ca">Like</span></a></td><td class="t cl cm" style="width:33%"><a class="bv y cn co" href="#composer-1547833552211412"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yw/r/ks_T7R1PM8o.png" width="16" height="16" class="cp by cq s" /><span class="ca">Comment</span></a></td><td class="t cl cr cm" style="width:33%"><a class="bv y cn co" href="/composer/mbasic/?c_src=share&amp;referrer=permalink&amp;target=100009543463363&amp;sid=1547833552211412&amp;m=self&amp;exit_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F&amp;cwevent=composer_entry&amp;av=100009543463363&amp;view_overview&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yP/r/_ByufLrUwa0.png" width="16" height="16" class="cp by cq s" /><span class="ca">Share</span></a></td></tr></tbody></table></div><div class="cs ct" id="ufi_1547833552211412"><div class="cu cv"><div class="cu"><div class="bg" id="1548823625445738"><h3><a class="cw" href="/teest.devisd">Teest Devisd</a></h3><div>Interesting</div><div class="bl cx cy"><span class="cz"><span class="da bq"><a href="/a/comment.php?like_comment_id=1548823625445738&amp;snowflake&amp;redirectosoftpermalink&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQCsbDT6pWIvHNUT">Like</a></span></span><span aria-hidden="true"> · </span><a href="/comment/replies/?ctoken=1547833552211412_1548823625445738&amp;actor_id=100009543463363&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQBBar72GfbtZXLN#comment_form_100009543463363_1547833552211412">Reply</a><span aria-hidden="true"> · </span><a href="/mbasic/comment/advanced/?target_id=1547833552211412&amp;at=edit&amp;ctoken=1547833552211412_1548823625445738">Edit</a><span aria-hidden="true"> · </span><abbr>Just now</abbr></div></div></div><div class="cu db" id="u_0_0"></div><div class="dc dd" id="composer-1547833552211412"><form method="post" action="/a/comment.php?fs=0&amp;actionsource=13&amp;redirectosoftpermalink&amp;comment_logging&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQDmjOAiwpRDjIka&amp;av=100009543463363"><input type="hidden" name="fb_dtsg" value="AQFJShXEC-2b:AQFf5wWeMzZ8" autocomplete="off" /><input type="hidden" name="charset_test" value="&#x20ac;,&#xb4;,&#x20ac;,&#xb4;,&#x6c34;,&#x414;,&#x404;" /><label class="de" for="u_0_1">Write a comment...</label><table class="m df" id="u_0_1"><tbody><tr><td class="t"><div class="dg dh"><table class="m di dj"><tbody><tr><td class="t dk ck"><input class="v w dl dm" id="composerInput" name="comment_text" type="text" /></td></tr></tbody></table></div></td><td class="n"><div class="dn"><input value="Comment" type="submit" class="y z do bb" /></div></td></tr></tbody></table><span class="dp bp bq"><a href="/mbasic/comment/advanced/?target_id=1547833552211412&amp;pap=1&amp;at=compose">Attach a Photo</a><span aria-hidden="true"> · </span><a href="/friends/selector/?return_uri=%2Fmbasic%2Fcomment%2Fadvanced%2F%3Ftarget_id%3D1547833552211412%26pap%26at%3Dcompose&amp;cancel_uri=%2Fmbasic%2Fcomment%2Fadvanced%2F%3Ftarget_id%3D1547833552211412%26pap%26at%3Dcompose&amp;friends_key=ids">Mention Friends</a></span></form></div></div></div></div></div></div></td></tr></tbody></table></div></div><div><div class="dq dr"><div id="search_div"><form method="get" action="/search/"><input type="hidden" name="search" /><input type="hidden" name="search_source" value="footer" /><div class="dg ds"><table class="m di dj"><tbody><tr><td class="n dt ck"><label for="u_0_2"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yp/r/eZuLK-TGwK1.png" width="20" height="20" class="du s" /></label></td><td class="t dk ck"><input class="v dv dw dm" name="query" id="u_0_2" type="text" /></td><td class="n dx ck"><input value="Search" type="submit" class="y z dy bb" /></td></tr></tbody></table></div></form></div><table class="m"><tbody><tr><td class="t dz" style="width:50%"><a class="ea" accesskey="0" href="/help/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Help</a><a class="ea" accesskey="7" href="/settings/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Settings &amp; Privacy</a><a class="ea" href="/pages/create/?ref_type=site_footer">Create Page</a></td><td class="t eb" style="width:50%"><a class="ea" href="/bugnub/?source=Footer&amp;ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Report a Problem</a><a class="ea" accesskey="8" href="/policies/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Terms &amp; Policies</a><a class="ea" href="/logout.php?h=AfeGuvHKArfyLyBT&amp;t=1455674071&amp;ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Log Out (Teest Devisd)</a></td></tr></tbody></table><a class="ec" href="#header">Back to Top</a></div></div></div></div></body></html>'
      let commentParameters = '&fb_dtsg=AQFJShXEC-2b:AQFf5wWeMzZ8&charset_test=€,´,€,´,水,Д,Є'
      doTest(done
        , html
        , {
          actions: [
            new Action({type: 'Share', target: '/composer/mbasic/?c_src=share&amp;referrer=permalink&amp;target=100009543463363&amp;sid=1547833552211412&amp;m=self&amp;exit_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F&amp;cwevent=composer_entry&amp;av=100009543463363&amp;view_overview&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController'}),
            new Action({ type: 'Like', target: '/a/like.php?ul&perm&ifab&ft_ent_identifier=1547833552211412&av=100009543463363&gfid=AQAZw2F7qECjJ2PE&ref_component=mbasic_photo_permalink_actionbar&ref_page=XPhotosAlbumPermalinkController' }),
            new Action({ type: 'Comment', target: '/a/comment.php?fs=0&actionsource=13&redirectosoftpermalink&comment_logging&ft_ent_identifier=1547833552211412&gfid=AQDmjOAiwpRDjIka&av=100009543463363' + commentParameters })
          ]
      })
    })

    
    it('liked', function(done) {
      let html = '<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>TestAlbum</title><meta name="referrer" content="default" id="meta_referrer" /><style type="text/css">/*<![CDATA[*/.bh .cb{margin:6px -6px 0;}.bh.bi .cb{margin:6px -9px 0;}.bh .cf{margin:6px -4px -4px;}.b .m{border:0;border-collapse:collapse;margin:0;padding:0;width:100%;}.b .m tbody,.b .dj>tr>td,.b .dj>tbody>tr>td,.b .m td.dj{vertical-align:top;}.b .ck>tr>td,.b .ck>tbody>tr>td,.b .m td.ck{vertical-align:middle;}.b .m td{padding:0;}.b .m td.w{padding:2px;}.b .m td.bg{padding:4px;}.b .t{width:100%;}.ct{background:#f6f7f8;}.bf{background:#fff;}.b .dz{padding:0;}.b .w{padding:2px;}.b .bg{padding:4px;}.bj{width:100%;}.bj .bt{text-align:right;}.bu{font-size:small;margin-top:0;}.b a,.b a:visited{color:#3b5998;text-decoration:none;}.b .br,.b .br:visited{color:#6d84b4;}.b .bd,.b .bd:visited{color:#fff;}.b a:focus,.b a:hover,.b .br:focus,.b .br:hover{background-color:#3b5998;color:#fff;}.b .bd:focus,.b .bd:hover{background-color:#fff;color:#3b5998;}.b .cj{border-color:#ddd;border-width:1px 0 0;}.b .cj .cl{background-color:#f6f7f8;}.b .cj .cl:hover,.b .cj .cl:hover .co{background-color:#e9eaed;}.b .cj .co{background-color:inherit;}.b .cj .cm .ca{color:#5890ff;}.cw .cx a{font-weight:bold;}.cv>div{border-top:1px solid rgba(0, 0, 0, .101);}.cv>.cv>div:first-child{border-top:none;}.cu,.cu .cz{background-color:#f6f7f8;color:#141823;}.dh{border-bottom:1px solid #ddd;}.b .dh{padding-bottom:8px;}.z{-webkit-appearance:none;background:none;display:inline-block;font-size:12px;height:28px;line-height:28px;margin:0;overflow:visible;padding:0 9px;text-align:center;vertical-align:top;white-space:nowrap;}.b .z{border-radius:2px;}.bx,a.bx,.b a.bx,.b a.bx:visited{background-color:#f6f7f8;color:#4e5665;}.b a.bx:hover,.b .bx:hover{background-color:#e9eaed;color:#4e5665;}.b .bx{border:1px solid #bdc1c9;}.z[disabled] .by{opacity:.3;}.bx[disabled]{color:#bdc1c9;}.b .bx[disabled]:hover{background-color:#f6f7f8;color:#bdc1c9;}.bb,a.bb,html .b a.bb{color:#fff;}.b .bb{background-color:#4e69a2;border:1px solid #385490;}.b a.bb:hover,.b .bb:hover{background-color:#465e91;}.bb[disabled]{color:#899bc1;}.b .bb[disabled]:hover{background-color:#4e69a2;}.z .ca{display:inline-block;}.b .z .ca{display:inline-block;margin-top:0;vertical-align:middle;}.b a.z::after,.b .z.bv::after{content:"";display:inline-block;height:100%;vertical-align:middle;}html .z .by{vertical-align:top;}.z .ca{line-height:20px;margin-top:4px;}.z .by.bz{margin-top:8px;}.z .by.cr{margin-top:6px;}.z .by.dy{margin-top:4px;}.z.bv{padding-left:8px;}.z.bv .by{margin-right:6px;}.z.bw{display:block;width:100%;}a.z.bw,.b label.z.bw{display:block;width:auto;}.b .z{padding:0 8px;}.b a.z{height:26px;line-height:26px;}.b a.z .by.bz{margin-top:7px;}.b a.z .by.cr{margin-top:5px;}.b a.z .by.dy{margin-top:3px;}.b .z.bv{padding-left:7px;}.by,.s.by{display:inline-block;pointer-events:none;vertical-align:middle;}.ca{pointer-events:none;}.s{border:0;display:inline-block;vertical-align:top;}i.s u{position:absolute;width:0;height:0;overflow:hidden;}.cd{display:inline-block;margin:2px;overflow:hidden;position:relative;}.cd:after{border:1px solid rgba(0, 0, 0, .1);bottom:0;content:"";left:0;position:absolute;right:0;top:0;}.ce{background:#f2f2f2;}.cc:hover .ce{background:none;}.ci{border-color:#d3d6db #cdd0d6 #c0c4cc;border-style:solid;border-width:1px;}.ch .co,.ch .cl{background-color:#fff;}.cl{background-color:#fff;position:relative;}.cl.cl.cl{padding:6px 0;}.co{-webkit-appearance:none;border:none;margin:0;padding:0;}input.cp,button.cp{width:100%;}.co{display:block;}.co{background-color:#fff;color:#4e5665;font-size:small;text-align:center;white-space:nowrap;}.b .cl a.co{color:#4e5665;}.b .cl a.co:hover,.b .cl a.co:focus{background:#f2f2f2;color:#4e5665;}.cl:hover,.cl:focus,.cl:hover .co,.cl:focus .co{background:#f2f2f2;}.co{padding:0 4px;}.cl .co .cq{display:block;margin:0 auto;}.cl .bv.co .cq{margin:0 auto 1px;}.cl .ca{pointer-events:auto;}@-webkit-keyframes mPlatformDialogOauthV4_moveUp{from{opacity:1;transform:translateY(0%);}to{opacity:0;transform:translateY(10%);}}@-webkit-keyframes mPlatformDialogOauthV4_moveDown{from{opacity:0;transform:translateY(10%);}to{opacity:1;transform:translateY(0%);}}@media screen and (orientation:portrait){}@media only screen and (orientation: landscape){}.cy{background:#eceff5;font-size:small;padding:8px;}.cy a{font-weight:bold;}.dg{padding:8px 8px 0;}.di{color:#141823;display:block;font-size:small;}.b .dg .dl table{border:none;}.b .dg .dp{border:1px solid #999;height:36px;padding:3px 3px 4px 0;width:98%;}.dr{padding-left:4px;}.dt{margin-top:4px;}form{margin:0;border:0;}.dk .ec{height:24px;line-height:24px;margin-left:2px;}.dn{background:#fff;}.dk .dq{background-color:transparent;color:#4e5665;display:block;padding:0;width:100%;}.dx .s{display:block;}.dk .dm .eb{padding:2px;}.dk .dm .dx{padding:4px;}.b .dk .dm{border:1px solid #9197a3;}.v{border:0;display:block;margin:0;padding:0;}.bq{color:gray;}.bp{font-size:small;}body,tr,input,textarea,.g{font-size:medium;}.bn{word-wrap:break-word;}.bs{margin-top:8px;}.bk .bo{font-size:x-small;}.bk .bs{font-size:small;margin:6px 0;}.db{color:#9197a3;}.bl{font-size:12px;line-height:16px;}.dc{font-weight:normal;}.bm{font-weight:bold;}@-webkit-keyframes highlightFade{0%{background:#fff9d7;}50%{background:#fff9d7;}100%{background:transparent;}}body{text-align:left;direction:ltr;}body,tr,input,textarea,button{font-family:sans-serif;}body,p,figure,h1,h2,h3,h4,h5,h6,ul,ol,li,dl,dd,dt{margin:0;padding:0;}h1,h2,h3,h4,h5,h6{font-size:1em;font-weight:bold;}ul,ol{list-style:none;}article,aside,figcaption,figure,footer,header,nav,section{display:block;}.d #viewport{margin:0 auto;max-width:600px;}.i{background-color:#3b5998;}.f{background:#dcdee3;}#page{position:relative;}.r,.r.s{display:block;}.o{display:block;}.p{height:20px;width:20px;}.k{background:#3b5998;padding:0 4px 4px;height:22px;}.k.k .x{background:#fff;border:1px solid #243872;box-sizing:border-box;font-size:small;height:22px;margin:0;padding:0;width:100%;}.l.k{padding:1px 1px 3px;}.k .q{padding:1px 3px 0 0;}.k.k.k .ba{background:#627aba;border:1px solid #2e417e;color:#fff;font-size:x-small;font-weight:normal;margin-left:3px;height:22px;line-height:20px;}.j{padding:2px 3px;}.du{font-size:small;padding:7px 8px 8px;}.eg{display:block;margin-top:8px;padding:2px;text-align:center;}.ee{display:block;font-size:x-small;margin:-3px -3px 1px -3px;padding:3px;}.b .du td.ed{padding-right:4px;}.b .du td.ef{padding-left:4px;}.du.dv{background-color:#4e5665;}.dv{border-top:1px solid #373e4d;color:#bdc1c9;}.dv .eg{border:1px solid #bdc1c9;color:#bdc1c9;}.b .dv a,.b .dv a:visited{color:#bdc1c9;}.b .dv a:focus,.b .dv a:hover{background:#dcdee3;color:#141823;}.dv .eg:focus,.dv .eg:hover{background:#dcdee3;border:1px solid #dcdee3;color:#141823;}.dw{margin-bottom:8px;}.du.dv .dw>table{background:#d3d7dc;border:1px solid #373e4d;}.ea{background:#d3d7dc;}.bc{padding-bottom:1px;}.be{display:inline-block;font-size:small;padding:2px 4px 2px;}/*]]>*/</style><link rel="manifest" href="/data/manifest" /></head><body tabindex="0" class="b c d e f"><div class="g"><div id="viewport"><div class="h"><div class="i j" id="header"><form method="get" class="k l" action="/search/"><input type="hidden" name="search" value="Search" /><input type="hidden" name="search_source" value="top_nav" /><table class="m"><tbody><tr><td class="n"><a class="o p q" href="/home.php?ref_component=mbasic_home_logo&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/ym/r/Gjhrhb7r0lb.png" width="20" height="20" class="r s" alt="Facebook logo" /></a></td><td class="t u"><input class="v w x" name="query" placeholder="Search Facebook" autocomplete="off" autocorrect="off" spellcheck="false" type="text" /></td><td class="n"><input value="Search" type="submit" class="y z ba bb" /></td></tr></tbody></table></form><div class="bc"><a class="bd be" accesskey="1" aria-label="Home" href="/home.php?a_type=sr&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController" style="display:block;height:0;overflow:hidden;position:absolute;width:0;padding:0">&nbsp;</a><a class="bd be" href="/home.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController" tabindex="-1" aria-hidden="1">Home</a><a class="bd be" href="/teest.devisd?v=info&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Edit Profile</a><a class="bd be" accesskey="2" href="/friends/center/mbasic/?fb_ref=tn&amp;sr=1&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Find Friends</a><a class="bd be" accesskey="4" href="/messages/?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Messages</a><a class="bd be" accesskey="3" href="/notifications.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Notifications</a><a class="bd be" accesskey="6" href="/buddylist.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Chat(1)</a><a class="bd be" accesskey="5" href="/menu/bookmarks/?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Menu</a></div></div></div><div id="objects_container"><div id="root" role="main" class="f"><table class="m"><tbody><tr><td class="t"><div class="bf bg"><div class="bh bi"><div><table cellspacing="0" cellpadding="0" class="bj"><tr><td valign="top"><div class="bk"><div class="bl bm bn">TestAlbum</div><span class="bo bp bq"><abbr>Monday at 15:17</abbr><span aria-hidden="true"> · </span><span>Privacy:&nbsp;<a href="/privacy/selectorx/?fbid=1547833552211412&amp;selected_privacyx=291667064279714&amp;return_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F%3Ffbt_id%3D1547833552211412%26lul%26ref_component%3Dmbasic_photo_permalink_actionbar&amp;context=album_permalink">Friends</a></span><span aria-hidden="true"> · </span><a class="br" href="/a/post/subscribe/?subscribe&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQAz_6TRQQwXxtvk">Stop notifications</a></span><div class="bs">Test Album</div></div></td><td valign="top" class="bt"><div class="bu"><a href="/photos/edit/album/1547833552211412/?cancel_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F%3Ffbt_id%3D1547833552211412%26lul%26ref_component%3Dmbasic_photo_permalink_actionbar&amp;referrer=album_permalink">Edit</a></div></td></tr></table></div><div><a class="bv y z bw bx" href="/composer/mbasic/?c_src=add_photo_in_album&amp;referrer=add_photo_in_album&amp;target=100009543463363&amp;album_id=1547833552211412&amp;ctype=inline&amp;cwevent=composer_entry&amp;av=100009543463363&amp;icv=lgc_view_photo&amp;lgc_view_photo"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yr/r/kdqLgRkNCQu.png" width="12" height="12" class="by bz s" /><span class="ca">Add Photos</span></a></div><div class="cb"><div style="text-align:center;" id="thumbnail_area"><a class="cc cd" href="/photo.php?fbid=1547833355544765&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xtp1/v/t1.0-0/cp0/e15/q65/c233.0.315.315/s75x225/12729066_1547833355544765_2022898844229182395_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=fd49ac80690e85d2b78f0f3d29dbe695&amp;oe=5725BD30" width="72" height="72" class="ce s" /></a><a class="cc cd" href="/photo.php?fbid=1547833358878098&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xfl1/v/t1.0-0/cp0/e15/q65/c18.0.479.479/s75x225/1001072_1547833358878098_1351903127458013912_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=b4b9b6c186e097ddb36254fa529bd279&amp;oe=5770234B" width="72" height="72" class="ce s" /></a><a class="cc cd" href="/photo.php?fbid=1547833362211431&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xlp1/v/t1.0-0/cp0/e15/q65/c85.0.326.326/s75x225/12743988_1547833362211431_1456221009165092547_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=91f335c80f69bd3096825768d8814b3d&amp;oe=575FFA6B" width="72" height="72" class="ce s" /></a></div></div><div></div><div class="cf cg"><div class="ch ci cj"><table class="m ck"><tbody><tr><td class="t cl cm cn" style="width:33%"><a class="bv y co cp" href="/a/like.php?ul=1&amp;perm&amp;ifab&amp;ft_ent_identifier=1547833552211412&amp;av=100009543463363&amp;gfid=AQB5WSEWa8e0hMz_&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yu/r/VYNYSvu5NAQ.png" width="16" height="16" class="cq by cr s" /><span class="ca">Like</span></a></td><td class="t cl cn" style="width:33%"><a class="bv y co cp" href="#composer-1547833552211412"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yw/r/ks_T7R1PM8o.png" width="16" height="16" class="cq by cr s" /><span class="ca">Comment</span></a></td><td class="t cl cs cn" style="width:33%"><a class="bv y co cp" href="/composer/mbasic/?c_src=share&amp;referrer=permalink&amp;target=100009543463363&amp;sid=1547833552211412&amp;m=self&amp;exit_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F%3Ffbt_id%3D1547833552211412%26lul%26ref_component%3Dmbasic_photo_permalink_actionbar&amp;cwevent=composer_entry&amp;av=100009543463363&amp;view_overview&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yP/r/_ByufLrUwa0.png" width="16" height="16" class="cq by cr s" /><span class="ca">Share</span></a></td></tr></tbody></table></div><div class="ct cu" id="ufi_1547833552211412"><div class="cv cw"><div class="bg cx cy cz">You like this.</div><div class="cv"><div class="bg" id="1548823625445738"><h3><a class="da" href="/teest.devisd">Teest Devisd</a></h3><div>Interesting</div><div class="bl db dc"><span class="dd"><span class="de bq"><a href="/a/comment.php?like_comment_id=1548823625445738&amp;snowflake&amp;redirectosoftpermalink&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQCsbDT6pWIvHNUT">Like</a></span></span><span aria-hidden="true"> · </span><a href="/comment/replies/?ctoken=1547833552211412_1548823625445738&amp;actor_id=100009543463363&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQBBar72GfbtZXLN#comment_form_100009543463363_1547833552211412">Reply</a><span aria-hidden="true"> · </span><a href="/mbasic/comment/advanced/?target_id=1547833552211412&amp;at=edit&amp;ctoken=1547833552211412_1548823625445738">Edit</a><span aria-hidden="true"> · </span><abbr>13 minutes ago</abbr></div></div></div><div class="cv df" id="u_0_0"></div><div class="dg dh" id="composer-1547833552211412"><form method="post" action="/a/comment.php?fs=0&amp;actionsource=13&amp;redirectosoftpermalink&amp;comment_logging&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQDmjOAiwpRDjIka&amp;av=100009543463363"><input type="hidden" name="fb_dtsg" value="AQGvo57VoL9O:AQGuAYLDFHxT" autocomplete="off" /><input type="hidden" name="charset_test" value="&#x20ac;,&#xb4;,&#x20ac;,&#xb4;,&#x6c34;,&#x414;,&#x404;" /><label class="di" for="u_0_1">Write a comment...</label><table class="m dj" id="u_0_1"><tbody><tr><td class="t"><div class="dk dl"><table class="m dm dn"><tbody><tr><td class="t do ck"><input class="v w dp dq" id="composerInput" name="comment_text" type="text" /></td></tr></tbody></table></div></td><td class="n"><div class="dr"><input value="Comment" type="submit" class="y z ds bb" /></div></td></tr></tbody></table><span class="dt bp bq"><a href="/mbasic/comment/advanced/?target_id=1547833552211412&amp;pap=1&amp;at=compose">Attach a Photo</a><span aria-hidden="true"> · </span><a href="/friends/selector/?return_uri=%2Fmbasic%2Fcomment%2Fadvanced%2F%3Ftarget_id%3D1547833552211412%26pap%26at%3Dcompose&amp;cancel_uri=%2Fmbasic%2Fcomment%2Fadvanced%2F%3Ftarget_id%3D1547833552211412%26pap%26at%3Dcompose&amp;friends_key=ids">Mention Friends</a></span></form></div></div></div></div></div></div></td></tr></tbody></table></div></div><div><div class="du dv"><div id="search_div"><form method="get" action="/search/"><input type="hidden" name="search" /><input type="hidden" name="search_source" value="footer" /><div class="dk dw"><table class="m dm dn"><tbody><tr><td class="n dx ck"><label for="u_0_2"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yp/r/eZuLK-TGwK1.png" width="20" height="20" class="dy s" /></label></td><td class="t do ck"><input class="v dz ea dq" name="query" id="u_0_2" type="text" /></td><td class="n eb ck"><input value="Search" type="submit" class="y z ec bb" /></td></tr></tbody></table></div></form></div><table class="m"><tbody><tr><td class="t ed" style="width:50%"><a class="ee" accesskey="0" href="/help/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Help</a><a class="ee" accesskey="7" href="/settings/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Settings &amp; Privacy</a><a class="ee" href="/pages/create/?ref_type=site_footer">Create Page</a></td><td class="t ef" style="width:50%"><a class="ee" href="/bugnub/?source=Footer&amp;ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Report a Problem</a><a class="ee" accesskey="8" href="/policies/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Terms &amp; Policies</a><a class="ee" href="/logout.php?h=AfeGuvHKArfyLyBT&amp;t=1455674875&amp;ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Log Out (Teest Devisd)</a></td></tr></tbody></table><a class="eg" href="#header">Back to Top</a></div></div></div></div></body></html>'
      doTest(done
        , html
        , {
          likeStatus: Post.LikeStatusLike,
          likeCount: 1
      })
    })
    
    
    it('comments', function(done) {
      let html = '<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>TestAlbum</title><meta name="referrer" content="default" id="meta_referrer" /><style type="text/css">/*<![CDATA[*/.bh .cb{margin:6px -6px 0;}.bh.bi .cb{margin:6px -9px 0;}.bh .cf{margin:6px -4px -4px;}.b .m{border:0;border-collapse:collapse;margin:0;padding:0;width:100%;}.b .m tbody,.b .dj>tr>td,.b .dj>tbody>tr>td,.b .m td.dj{vertical-align:top;}.b .ck>tr>td,.b .ck>tbody>tr>td,.b .m td.ck{vertical-align:middle;}.b .m td{padding:0;}.b .m td.w{padding:2px;}.b .m td.bg{padding:4px;}.b .t{width:100%;}.ct{background:#f6f7f8;}.bf{background:#fff;}.b .dz{padding:0;}.b .w{padding:2px;}.b .bg{padding:4px;}.bj{width:100%;}.bj .bt{text-align:right;}.bu{font-size:small;margin-top:0;}.b a,.b a:visited{color:#3b5998;text-decoration:none;}.b .br,.b .br:visited{color:#6d84b4;}.b .bd,.b .bd:visited{color:#fff;}.b a:focus,.b a:hover,.b .br:focus,.b .br:hover{background-color:#3b5998;color:#fff;}.b .bd:focus,.b .bd:hover{background-color:#fff;color:#3b5998;}.b .cj{border-color:#ddd;border-width:1px 0 0;}.b .cj .cl{background-color:#f6f7f8;}.b .cj .cl:hover,.b .cj .cl:hover .co{background-color:#e9eaed;}.b .cj .co{background-color:inherit;}.b .cj .cm .ca{color:#5890ff;}.cw .cx a{font-weight:bold;}.cv>div{border-top:1px solid rgba(0, 0, 0, .101);}.cv>.cv>div:first-child{border-top:none;}.cu,.cu .cz{background-color:#f6f7f8;color:#141823;}.dh{border-bottom:1px solid #ddd;}.b .dh{padding-bottom:8px;}.cd{display:inline-block;margin:2px;overflow:hidden;position:relative;}.cd:after{border:1px solid rgba(0, 0, 0, .1);bottom:0;content:"";left:0;position:absolute;right:0;top:0;}.ce{background:#f2f2f2;}.cc:hover .ce{background:none;}.ci{border-color:#d3d6db #cdd0d6 #c0c4cc;border-style:solid;border-width:1px;}.ch .co,.ch .cl{background-color:#fff;}.cl{background-color:#fff;position:relative;}.cl.cl.cl{padding:6px 0;}.co{-webkit-appearance:none;border:none;margin:0;padding:0;}input.cp,button.cp{width:100%;}.co{display:block;}.co{background-color:#fff;color:#4e5665;font-size:small;text-align:center;white-space:nowrap;}.b .cl a.co{color:#4e5665;}.b .cl a.co:hover,.b .cl a.co:focus{background:#f2f2f2;color:#4e5665;}.cl:hover,.cl:focus,.cl:hover .co,.cl:focus .co{background:#f2f2f2;}.co{padding:0 4px;}.cl .co .cq{display:block;margin:0 auto;}.cl .bv.co .cq{margin:0 auto 1px;}.cl .ca{pointer-events:auto;}.by,.s.by{display:inline-block;pointer-events:none;vertical-align:middle;}.ca{pointer-events:none;}.s{border:0;display:inline-block;vertical-align:top;}i.s u{position:absolute;width:0;height:0;overflow:hidden;}@-webkit-keyframes mPlatformDialogOauthV4_moveUp{from{opacity:1;transform:translateY(0%);}to{opacity:0;transform:translateY(10%);}}@-webkit-keyframes mPlatformDialogOauthV4_moveDown{from{opacity:0;transform:translateY(10%);}to{opacity:1;transform:translateY(0%);}}@media screen and (orientation:portrait){}@media only screen and (orientation: landscape){}.cy{background:#eceff5;font-size:small;padding:8px;}.cy a{font-weight:bold;}.dg{padding:8px 8px 0;}.di{color:#141823;display:block;font-size:small;}.b .dg .dl table{border:none;}.b .dg .dp{border:1px solid #999;height:36px;padding:3px 3px 4px 0;width:98%;}.dr{padding-left:4px;}.dt{margin-top:4px;}form{margin:0;border:0;}.dk .ec{height:24px;line-height:24px;margin-left:2px;}.dn{background:#fff;}.dk .dq{background-color:transparent;color:#4e5665;display:block;padding:0;width:100%;}.dx .s{display:block;}.dk .dm .eb{padding:2px;}.dk .dm .dx{padding:4px;}.b .dk .dm{border:1px solid #9197a3;}.v{border:0;display:block;margin:0;padding:0;}.z{-webkit-appearance:none;background:none;display:inline-block;font-size:12px;height:28px;line-height:28px;margin:0;overflow:visible;padding:0 9px;text-align:center;vertical-align:top;white-space:nowrap;}.b .z{border-radius:2px;}.bx,a.bx,.b a.bx,.b a.bx:visited{background-color:#f6f7f8;color:#4e5665;}.b a.bx:hover,.b .bx:hover{background-color:#e9eaed;color:#4e5665;}.b .bx{border:1px solid #bdc1c9;}.z[disabled] .by{opacity:.3;}.bx[disabled]{color:#bdc1c9;}.b .bx[disabled]:hover{background-color:#f6f7f8;color:#bdc1c9;}.bb,a.bb,html .b a.bb{color:#fff;}.b .bb{background-color:#4e69a2;border:1px solid #385490;}.b a.bb:hover,.b .bb:hover{background-color:#465e91;}.bb[disabled]{color:#899bc1;}.b .bb[disabled]:hover{background-color:#4e69a2;}.z .ca{display:inline-block;}.b .z .ca{display:inline-block;margin-top:0;vertical-align:middle;}.b a.z::after,.b .z.bv::after{content:"";display:inline-block;height:100%;vertical-align:middle;}html .z .by{vertical-align:top;}.z .ca{line-height:20px;margin-top:4px;}.z .by.bz{margin-top:8px;}.z .by.cr{margin-top:6px;}.z .by.dy{margin-top:4px;}.z.bv{padding-left:8px;}.z.bv .by{margin-right:6px;}.z.bw{display:block;width:100%;}a.z.bw,.b label.z.bw{display:block;width:auto;}.b .z{padding:0 8px;}.b a.z{height:26px;line-height:26px;}.b a.z .by.bz{margin-top:7px;}.b a.z .by.cr{margin-top:5px;}.b a.z .by.dy{margin-top:3px;}.b .z.bv{padding-left:7px;}.bq{color:gray;}.bp{font-size:small;}body,tr,input,textarea,.g{font-size:medium;}.bn{word-wrap:break-word;}.bs{margin-top:8px;}.bk .bo{font-size:x-small;}.bk .bs{font-size:small;margin:6px 0;}.db{color:#9197a3;}.bl{font-size:12px;line-height:16px;}.dc{font-weight:normal;}.bm{font-weight:bold;}@-webkit-keyframes highlightFade{0%{background:#fff9d7;}50%{background:#fff9d7;}100%{background:transparent;}}body{text-align:left;direction:ltr;}body,tr,input,textarea,button{font-family:sans-serif;}body,p,figure,h1,h2,h3,h4,h5,h6,ul,ol,li,dl,dd,dt{margin:0;padding:0;}h1,h2,h3,h4,h5,h6{font-size:1em;font-weight:bold;}ul,ol{list-style:none;}article,aside,figcaption,figure,footer,header,nav,section{display:block;}.d #viewport{margin:0 auto;max-width:600px;}.i{background-color:#3b5998;}.f{background:#dcdee3;}#page{position:relative;}.r,.r.s{display:block;}.o{display:block;}.p{height:20px;width:20px;}.k{background:#3b5998;padding:0 4px 4px;height:22px;}.k.k .x{background:#fff;border:1px solid #243872;box-sizing:border-box;font-size:small;height:22px;margin:0;padding:0;width:100%;}.l.k{padding:1px 1px 3px;}.k .q{padding:1px 3px 0 0;}.k.k.k .ba{background:#627aba;border:1px solid #2e417e;color:#fff;font-size:x-small;font-weight:normal;margin-left:3px;height:22px;line-height:20px;}.j{padding:2px 3px;}.du{font-size:small;padding:7px 8px 8px;}.eg{display:block;margin-top:8px;padding:2px;text-align:center;}.ee{display:block;font-size:x-small;margin:-3px -3px 1px -3px;padding:3px;}.b .du td.ed{padding-right:4px;}.b .du td.ef{padding-left:4px;}.du.dv{background-color:#4e5665;}.dv{border-top:1px solid #373e4d;color:#bdc1c9;}.dv .eg{border:1px solid #bdc1c9;color:#bdc1c9;}.b .dv a,.b .dv a:visited{color:#bdc1c9;}.b .dv a:focus,.b .dv a:hover{background:#dcdee3;color:#141823;}.dv .eg:focus,.dv .eg:hover{background:#dcdee3;border:1px solid #dcdee3;color:#141823;}.dw{margin-bottom:8px;}.du.dv .dw>table{background:#d3d7dc;border:1px solid #373e4d;}.ea{background:#d3d7dc;}.bc{padding-bottom:1px;}.be{display:inline-block;font-size:small;padding:2px 4px 2px;}/*]]>*/</style><link rel="manifest" href="/data/manifest" /></head><body tabindex="0" class="b c d e f"><div class="g"><div id="viewport"><div class="h"><div class="i j" id="header"><form method="get" class="k l" action="/search/"><input type="hidden" name="search" value="Search" /><input type="hidden" name="search_source" value="top_nav" /><table class="m"><tbody><tr><td class="n"><a class="o p q" href="/home.php?ref_component=mbasic_home_logo&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/ym/r/Gjhrhb7r0lb.png" width="20" height="20" class="r s" alt="Facebook logo" /></a></td><td class="t u"><input class="v w x" name="query" placeholder="Search Facebook" autocomplete="off" autocorrect="off" spellcheck="false" type="text" /></td><td class="n"><input value="Search" type="submit" class="y z ba bb" /></td></tr></tbody></table></form><div class="bc"><a class="bd be" accesskey="1" aria-label="Home" href="/home.php?a_type=sr&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController" style="display:block;height:0;overflow:hidden;position:absolute;width:0;padding:0">&nbsp;</a><a class="bd be" href="/home.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController" tabindex="-1" aria-hidden="1">Home</a><a class="bd be" href="/teest.devisd?v=info&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Edit Profile</a><a class="bd be" accesskey="2" href="/friends/center/mbasic/?fb_ref=tn&amp;sr=1&amp;ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Find Friends</a><a class="bd be" accesskey="4" href="/messages/?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Messages</a><a class="bd be" accesskey="3" href="/notifications.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Notifications</a><a class="bd be" accesskey="6" href="/buddylist.php?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Chat(1)</a><a class="bd be" accesskey="5" href="/menu/bookmarks/?ref_component=mbasic_home_header&amp;ref_page=XPhotosAlbumPermalinkController">Menu</a></div></div></div><div id="objects_container"><div id="root" role="main" class="f"><table class="m"><tbody><tr><td class="t"><div class="bf bg"><div class="bh bi"><div><table cellspacing="0" cellpadding="0" class="bj"><tr><td valign="top"><div class="bk"><div class="bl bm bn">TestAlbum</div><span class="bo bp bq"><abbr>Monday at 15:17</abbr><span aria-hidden="true"> · </span><span>Privacy:&nbsp;<a href="/privacy/selectorx/?fbid=1547833552211412&amp;selected_privacyx=291667064279714&amp;return_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F%3Ffbt_id%3D1547833552211412%26lul%26ref_component%3Dmbasic_photo_permalink_actionbar&amp;context=album_permalink">Friends</a></span><span aria-hidden="true"> · </span><a class="br" href="/a/post/subscribe/?subscribe&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQAz_6TRQQwXxtvk">Stop notifications</a></span><div class="bs">Test Album</div></div></td><td valign="top" class="bt"><div class="bu"><a href="/photos/edit/album/1547833552211412/?cancel_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F%3Ffbt_id%3D1547833552211412%26lul%26ref_component%3Dmbasic_photo_permalink_actionbar&amp;referrer=album_permalink">Edit</a></div></td></tr></table></div><div><a class="bv y z bw bx" href="/composer/mbasic/?c_src=add_photo_in_album&amp;referrer=add_photo_in_album&amp;target=100009543463363&amp;album_id=1547833552211412&amp;ctype=inline&amp;cwevent=composer_entry&amp;av=100009543463363&amp;icv=lgc_view_photo&amp;lgc_view_photo"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yr/r/kdqLgRkNCQu.png" width="12" height="12" class="by bz s" /><span class="ca">Add Photos</span></a></div><div class="cb"><div style="text-align:center;" id="thumbnail_area"><a class="cc cd" href="/photo.php?fbid=1547833355544765&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xtp1/v/t1.0-0/cp0/e15/q65/c233.0.315.315/s75x225/12729066_1547833355544765_2022898844229182395_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=fd49ac80690e85d2b78f0f3d29dbe695&amp;oe=5725BD30" width="72" height="72" class="ce s" /></a><a class="cc cd" href="/photo.php?fbid=1547833358878098&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xfl1/v/t1.0-0/cp0/e15/q65/c18.0.479.479/s75x225/1001072_1547833358878098_1351903127458013912_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=b4b9b6c186e097ddb36254fa529bd279&amp;oe=5770234B" width="72" height="72" class="ce s" /></a><a class="cc cd" href="/photo.php?fbid=1547833362211431&amp;id=100009543463363&amp;set=a.1547833552211412.1073741843.100009543463363&amp;source=56"><img src="https://scontent.fper1-1.fna.fbcdn.net/hphotos-xlp1/v/t1.0-0/cp0/e15/q65/c85.0.326.326/s75x225/12743988_1547833362211431_1456221009165092547_n.jpg?efg=eyJpIjoiYiJ9&amp;oh=91f335c80f69bd3096825768d8814b3d&amp;oe=575FFA6B" width="72" height="72" class="ce s" /></a></div></div><div></div><div class="cf cg"><div class="ch ci cj"><table class="m ck"><tbody><tr><td class="t cl cm cn" style="width:33%"><a class="bv y co cp" href="/a/like.php?ul=1&amp;perm&amp;ifab&amp;ft_ent_identifier=1547833552211412&amp;av=100009543463363&amp;gfid=AQB5WSEWa8e0hMz_&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yu/r/VYNYSvu5NAQ.png" width="16" height="16" class="cq by cr s" /><span class="ca">Like</span></a></td><td class="t cl cn" style="width:33%"><a class="bv y co cp" href="#composer-1547833552211412"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yw/r/ks_T7R1PM8o.png" width="16" height="16" class="cq by cr s" /><span class="ca">Comment</span></a></td><td class="t cl cs cn" style="width:33%"><a class="bv y co cp" href="/composer/mbasic/?c_src=share&amp;referrer=permalink&amp;target=100009543463363&amp;sid=1547833552211412&amp;m=self&amp;exit_uri=https%3A%2F%2Fm.facebook.com%2Fteest.devisd%2Falbums%2F1547833552211412%2F%3Ffbt_id%3D1547833552211412%26lul%26ref_component%3Dmbasic_photo_permalink_actionbar&amp;cwevent=composer_entry&amp;av=100009543463363&amp;view_overview&amp;ref_component=mbasic_photo_permalink_actionbar&amp;ref_page=XPhotosAlbumPermalinkController"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yP/r/_ByufLrUwa0.png" width="16" height="16" class="cq by cr s" /><span class="ca">Share</span></a></td></tr></tbody></table></div><div class="ct cu" id="ufi_1547833552211412"><div class="cv cw"><div class="bg cx cy cz">You like this.</div><div class="cv"><div class="bg" id="1548823625445738"><h3><a class="da" href="/teest.devisd">Teest Devisd</a></h3><div>Interesting</div><div class="bl db dc"><span class="dd"><span class="de bq"><a href="/a/comment.php?like_comment_id=1548823625445738&amp;snowflake&amp;redirectosoftpermalink&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQCsbDT6pWIvHNUT">Like</a></span></span><span aria-hidden="true"> · </span><a href="/comment/replies/?ctoken=1547833552211412_1548823625445738&amp;actor_id=100009543463363&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQBBar72GfbtZXLN#comment_form_100009543463363_1547833552211412">Reply</a><span aria-hidden="true"> · </span><a href="/mbasic/comment/advanced/?target_id=1547833552211412&amp;at=edit&amp;ctoken=1547833552211412_1548823625445738">Edit</a><span aria-hidden="true"> · </span><abbr>5 minutes ago</abbr></div></div></div><div class="cv df" id="u_0_0"></div><div class="dg dh" id="composer-1547833552211412"><form method="post" action="/a/comment.php?fs=0&amp;actionsource=13&amp;redirectosoftpermalink&amp;comment_logging&amp;ft_ent_identifier=1547833552211412&amp;gfid=AQDmjOAiwpRDjIka&amp;av=100009543463363"><input type="hidden" name="fb_dtsg" value="AQHQU8Cf32I1:AQF6HFe9xn31" autocomplete="off" /><input type="hidden" name="charset_test" value="&#x20ac;,&#xb4;,&#x20ac;,&#xb4;,&#x6c34;,&#x414;,&#x404;" /><label class="di" for="u_0_1">Write a comment...</label><table class="m dj" id="u_0_1"><tbody><tr><td class="t"><div class="dk dl"><table class="m dm dn"><tbody><tr><td class="t do ck"><input class="v w dp dq" id="composerInput" name="comment_text" type="text" /></td></tr></tbody></table></div></td><td class="n"><div class="dr"><input value="Comment" type="submit" class="y z ds bb" /></div></td></tr></tbody></table><span class="dt bp bq"><a href="/mbasic/comment/advanced/?target_id=1547833552211412&amp;pap=1&amp;at=compose">Attach a Photo</a><span aria-hidden="true"> · </span><a href="/friends/selector/?return_uri=%2Fmbasic%2Fcomment%2Fadvanced%2F%3Ftarget_id%3D1547833552211412%26pap%26at%3Dcompose&amp;cancel_uri=%2Fmbasic%2Fcomment%2Fadvanced%2F%3Ftarget_id%3D1547833552211412%26pap%26at%3Dcompose&amp;friends_key=ids">Mention Friends</a></span></form></div></div></div></div></div></div></td></tr></tbody></table></div></div><div><div class="du dv"><div id="search_div"><form method="get" action="/search/"><input type="hidden" name="search" /><input type="hidden" name="search_source" value="footer" /><div class="dk dw"><table class="m dm dn"><tbody><tr><td class="n dx ck"><label for="u_0_2"><img src="https://static.xx.fbcdn.net/rsrc.php/v2/yp/r/eZuLK-TGwK1.png" width="20" height="20" class="dy s" /></label></td><td class="t do ck"><input class="v dz ea dq" name="query" id="u_0_2" type="text" /></td><td class="n eb ck"><input value="Search" type="submit" class="y z ec bb" /></td></tr></tbody></table></div></form></div><table class="m"><tbody><tr><td class="t ed" style="width:50%"><a class="ee" accesskey="0" href="/help/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Help</a><a class="ee" accesskey="7" href="/settings/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Settings &amp; Privacy</a><a class="ee" href="/pages/create/?ref_type=site_footer">Create Page</a></td><td class="t ef" style="width:50%"><a class="ee" href="/bugnub/?source=Footer&amp;ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Report a Problem</a><a class="ee" accesskey="8" href="/policies/?ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Terms &amp; Policies</a><a class="ee" href="/logout.php?h=AfeGuvHKArfyLyBT&amp;t=1455674415&amp;ref_component=mbasic_footer&amp;ref_page=XPhotosAlbumPermalinkController">Log Out (Teest Devisd)</a></td></tr></tbody></table><a class="eg" href="#header">Back to Top</a></div></div></div></div></body></html>'
      doTest(done
        , html
        , {
          comments: [
            new Comment({id: '1548823625445738', message: 'Interesting', rawTimestamp: '5 minutes ago', vendor: 'facebook', 
              creator: {name: 'Teest Devisd', profileUrl: '/teest.devisd'} })
          ]
      })
    })
    
  })
  
})